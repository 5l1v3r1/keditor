{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./src/keditor/constants/classNames.js","webpack:///./src/keditor/constants/defaults.js","webpack:///./src/keditor/utils/log.js","webpack:///./src/keditor/utils/error.js","webpack:///./src/keditor/constants/toolbarType.js","webpack:///./src/keditor/sidebar/openSidebar.js","webpack:///./src/keditor/sidebar/closeSidebar.js","webpack:///./src/keditor/snippet/renderSnippets.js","webpack:///./src/keditor/constants/snippetType.js","webpack:///./src/keditor/component/getComponentType.js","webpack:///./src/keditor/component/initComponent.js","webpack:///./src/keditor/component/deleteComponent.js","webpack:///./src/keditor/component/getComponentContent.js","webpack:///./src/keditor/init.js","webpack:///./src/keditor/destroy.js","webpack:///./src/keditor/index.js","webpack:///./src/keditor/utils/generateId.js","webpack:///./src/keditor/utils/generateContentAreasWrapper.js","webpack:///./src/keditor/utils/generateToolbar.js","webpack:///./src/keditor/utils/beautifyCategories.js","webpack:///./src/keditor/utils/getDataAttributes.js","webpack:///./src/keditor/utils/getClickedElement.js","webpack:///./src/keditor/iframe/initIframe.js","webpack:///./src/keditor/iframe/initIframeCover.js","webpack:///./src/keditor/utils/initKEditorClicks.js","webpack:///./src/keditor/sidebar/initSidebar.js","webpack:///./src/keditor/modal/initSnippetsModal.js","webpack:///./src/keditor/snippet/initSnippetsFilter.js","webpack:///./src/keditor/modal/openModal.js","webpack:///./src/keditor/modal/closeModal.js","webpack:///./src/keditor/contentArea/initContentAreas.js","webpack:///./src/keditor/contentArea/initContentArea.js","webpack:///./src/keditor/container/convertToContainer.js","webpack:///./src/keditor/container/initContainer.js","webpack:///./src/keditor/container/initContainerContent.js","webpack:///./src/keditor/component/convertToComponent.js","webpack:///./src/keditor/component/initDynamicContent.js","webpack:///./src/keditor/container/getContainerContent.js","webpack:///./src/keditor/getContent.js","webpack:///./src/keditor/setContent.js"],"names":["root","factory","exports","module","require","define","amd","a","i","self","this","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","classNames","UI","concat","HIDDEN_ELEMENT","CLICKS_INITIALIZED","CONTENT_AREAS_WRAPPER","defaults","nestedContainerEnabled","explicitSnippetEnabled","containerForQuickAddComponent","btnAddContentText","btnAddContainerText","btnAddSubContainerText","btnAddComponentText","btnMoveContainerText","btnMoveComponentText","btnSettingContainerText","btnSettingComponentText","btnDuplicateContainerText","btnDuplicateComponentText","btnDeleteContainerText","btnDeleteComponentText","confirmDeleteContainerText","confirmDeleteComponentText","defaultComponentType","snippetsUrl","snippetsFilterEnabled","snippetsCategoriesSeparator","iframeMode","contentStyles","contentAreasSelector","contentAreasWrapper","CLASS_NAMES","containerSettingEnabled","containerSettingInitFunction","containerSettingShowFunction","containerSettingHideFunction","onReady","onSnippetsLoaded","resp","onSnippetsError","jqXHR","onInitIframe","iframe","iframeHead","iframeBody","onContentChanged","event","contentArea","onBeforeInitContentArea","onInitContentArea","onBeforeInitContainer","container","onInitContainer","onBeforeContainerDeleted","selectedContainer","onContainerDeleted","onContainerChanged","changedContainer","onContainerDuplicated","originalContainer","newContainer","onContainerSelected","onContainerSnippetAdded","selectedSnippet","onComponentReady","component","onBeforeInitComponent","onInitComponent","onBeforeComponentDeleted","selectedComponent","onComponentDeleted","onComponentChanged","changedComponent","onComponentDuplicated","originalComponent","newComponent","onComponentSelected","onComponentSnippetAdded","onBeforeDynamicContentLoad","dynamicElement","onDynamicContentLoaded","onDynamicContentError","utils_log","console","log","$","keditor","debug","_len","arguments","length","args","Array","_key","apply","utils_error","message","Error","toolbarType","sidebar_openSidebar","target","options","sidebar","sidebarTitle","find","sidebarBody","children","removeClass","is","setSettingComponent","setSettingContainer","componentType","getComponentType","componentData","KEditor","components","html","settingTitle","settingForm","initSettingForm","loadingText","append","initFunction","when","done","setTimeout","remove","showSettingForm","addClass","sidebar_closeSidebar","activeForm","activeType","attr","hideSettingForm","constants_snippetType","component_getComponentType","replace","error","component_initComponent","body","hasClass","generateId","generateToolbar","TOOLBAR_TYPE","settingEnabled","each","initDynamicContent","init","component_deleteComponent","destroy","component_getComponentContent","content","clonedComponent","clone","dataAttributes","getDataAttributes","iframeWrapper","unwrap","getContent","join","config","element","extend","DEFAULTS","initIframe","window","document","originalContent","val","generateContentAreasWrapper","after","empty","initSidebar","initSnippetsModal","initContentAreas","initKEditorClicks","id","instances","keditor_destroy","data","fn","sortable","_classCallCheck","type","undefined","timestamp","Date","getTime","random","Math","round","isComponentConfigurable","settingBtn","categories","newArray","category","inArray","push","sort","settingContainer","settingComponent","ignoreAttributes","isArray","attributes","indexOf","selector","closest","wrapper","iframeDoc","contents","open","close","contentWindow","contentDocument","defaultView","styles","style","href","idStr","wrap","parent","cover","prepend","on","e","preventDefault","getClickedElement","modal","btn","closeSidebar","openSidebar","getContainerContent","convertToContainer","confirm","deleteComponent","getComponentContent","convertToComponent","sidebarId","form","appendTo","modalId","snippetsWrapperHtml","ajax","dataType","url","success","renderSnippets","initSnippetsFilter","SNIPPET_TYPE","closeModal","modalTarget","snippetType","snippetContentElement","snippetContent","isAddingContainer","isAddingComponent","isAddingComponentWithContainer","modalSnippetType","initContainer","initComponent","eq","snippet","css","snippetsContainerHtml","snippetsComponentHtml","snippetsContentHtml","snippetsCategories","snippetsContainerCategories","snippetsComponentCategories","filter","snippetId","trim","previewUrl","title","snippetHtml","split","beautifyCategories","_toConsumableArray","snippetsWrapperSelector","categoriesOptions","snippetsWrapper","snippets","filterCategories","toLowerCase","timer","txtSearch","cbbFilter","doFilter","selectedCategory","searchText","dataCategories","dataCategoriesString","clearTimeout","modalTitle","modalAction","contentAreas","initContentArea","dontInitToolbar","contentAreaInner","contentAreaToolbar","openModal","handle","items","helper","connectWith","axis","tolerance","receive","ui","item","start","stop","contentData","wrapInner","isNested","containerContents","containerContent","parents","initContainerContent","containerContentInner","containerContentToolbar","child","isExisting","dynamicHref","param","response","status","textStatus","errorThrown","containerInner","not","removeAttr","result","jquery","blank","instance","slice","constructor"],"mappings":"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","file":"js/keditor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"jQuery\")) : factory(root[\"jQuery\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","const PREFIX_CLASS = 'keditor-';\rexport default {\rUI: `${PREFIX_CLASS}ui`,\rHIDDEN_ELEMENT: `${PREFIX_CLASS}hidden-element`,\rCLICKS_INITIALIZED: `${PREFIX_CLASS}clicks-initialized`,\rCONTENT_AREAS_WRAPPER: `${PREFIX_CLASS}content-areas-wrapper`,\r\n};","import CLASS_NAMES from './classNames';\rexport default {\r// Enable nested container or not\r// @option {Boolean}\rnestedContainerEnabled: true,\r// Enable explicit snippet or not. When disable, there is only one button for adding. If add button is in content area or container, you can add component or containers. If add button is in sub-container, you just can add only component. When you add component in content area, please make sure you config \"containerForQuickAddComponent\" option\r// @option {Boolean}\rexplicitSnippetEnabled: false,\r// containerForQuickAddComponent The container snippet which will be added automatically in content are when you adding a component. Note: component will be added in first container content of container\r// @option {String}\rcontainerForQuickAddComponent: `\r<div class=\"row\">\r<div class=\"col-sm-12\" data-type=\"container-content\">\r</div>\r</div>\r`,\r// Text content for add content button. This available only when \"explicitSippetEnabled\" is \"false\"\r// @option {String}\rbtnAddContentText: '<i class=\"fa fa-plus\"></i>',\r// Text content for add container button\r// @option {String}\rbtnAddContainerText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-columns\"></i>',\r// Text content for add sub-container button\r// @option {String}\rbtnAddSubContainerText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-columns\"></i>',\r// Text content for add component button\r// @option {String}\rbtnAddComponentText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-list-ul\"></i>',\r// Text content for move button of container\r// @option {String}\rbtnMoveContainerText: '<i class=\"fa fa-sort\"></i>',\r// Text content for move button of component\r// @option {String}\rbtnMoveComponentText: '<i class=\"fa fa-arrows\"></i>',\r// Text content for setting button of container\r// @option {String}\rbtnSettingContainerText: '<i class=\"fa fa-cog\"></i>',\r// Text content for setting button of component\r// @option {String}\rbtnSettingComponentText: '<i class=\"fa fa-cog\"></i>',\r// Text content for duplicate button of container\r// @option {String}\rbtnDuplicateContainerText: '<i class=\"fa fa-files-o\"></i>',\r// Text content for duplicate button of component\r// @option {String}\rbtnDuplicateComponentText: '<i class=\"fa fa-files-o\"></i>',\r// Text content for delete button of container\r// @option {String}\rbtnDeleteContainerText: '<i class=\"fa fa-times\"></i>',\r// Text content for delete button of component\r// @option {String}\rbtnDeleteComponentText: '<i class=\"fa fa-times\"></i>',\r// Text content for confirm dialog when deleting container\r// @option {String}\rconfirmDeleteContainerText: 'Are you sure that you want to delete this container? This action can not be undone!',\r// Text content for confirm dialog when deleting container\r// @option {String}\rconfirmDeleteComponentText: 'Are you sure that you want to delete this component? This action can not be undone!',\r// Default component type of component. If type of component does not exist in KEditor.components, will be used \"defaultComponentType\" as type of this component. If is function, argument is component\r// @option {String|Function}\r// @param {jQuery} component\rdefaultComponentType: 'blank',\r// Url to snippets file\r// @option {String}\rsnippetsUrl: 'snippets/snippets.html',\r// Enable filtering snippets by categories and text searching or not\r// @option {Boolean}\rsnippetsFilterEnabled: true,\r// The separator character between each categories\r// @option {String}\rsnippetsCategoriesSeparator: ';',\r// KEditor is created inside an iframe or not. KEditor is created inside an iframe or not. KEditor will add all elements which have 'data-type=keditor-style' for iframe stylesheet. These elements can be 'link', 'style' or any tags. If these elements have 'href' attribute, will create link tag with href. If these elements do not have 'href' attribute, will create style tag with css rule is html code inside element\r// @option {Boolean}\riframeMode: false,\r// Content styles for iframe mode\r// @option {Array<Object>}\r// @example:\r// [\r//     {\r//         href: '/path/to/style/file'\r//     }, {\r//         content: 'a { color: red; }'\r//     }\r// ]\rcontentStyles: [],\r// Selector of content areas. If is null or selector does not match any elements, will create default content area and wrap all content inside it.\r// @option {String}\rcontentAreasSelector: null,\r// The wrapper element for all contents inside iframe or new div which will contains content of textarea. It's just for displaying purpose. If you want all contents inside iframe are appended into body tag, just leave it as blank\r// @option {String}\rcontentAreasWrapper: `<div class=\"${CLASS_NAMES.UI} ${CLASS_NAMES.CONTENT_AREAS_WRAPPER}\"></div>`,\r// Enable setting panel for container\r// @option {Boolean}\rcontainerSettingEnabled: false,\r// Method will be called when initializing setting panel for container\r// @option {Function}\r// @param {jQuery} container\r// @param {KEditor} keditorInstance\rcontainerSettingInitFunction: null,\r// Method will be called when setting panel for container is showed\r// @option {Function}\r// @param {jQuery} settingForm\r// @param {jQuery} container\r// @param {KEditor} keditorInstance\rcontainerSettingShowFunction: null,\r// Method will be called when setting panel for container is hidden\r// @option {Function}\r// @param {jQuery} settingForm\r// @param {KEditor} keditorInstance\rcontainerSettingHideFunction: null,\r// Callback will be called after keditor instance is ready\r// @option {Function}\ronReady: function () {\r},\r// Callback will be called after snippets are loaded. If you want to modify snippets content, please return modified\r// @option {Function}\r// @param {String} resp\r// @return {String}\ronSnippetsLoaded: function (resp) {\r},\r// Callback will be called when error in loading snippets\r// @option {Function}\r// @param {jqXHR} jqXHR\ronSnippetsError: function (jqXHR) {\r},\r// Callback will be called after iframe and content areas wrapper inside it are created\r// @option {Function}\r// @param {jQuery} iframe\r// @param {jQuery} iframeHead\r// @param {jQuery} iframeBody\ronInitIframe: function (iframe, iframeHead, iframeBody) {\r},\r// Callback will be called when content is changed. Includes add, delete, duplicate container or component. Or content of a component is changed\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} contentArea\ronContentChanged: function (event, contentArea) {\r},\r// Callback will be called before initializing container\r// @option {Function}\r// @param {jQuery} contentArea\ronBeforeInitContentArea: function (contentArea) {\r},\r// Callback will be called when initializing content area. It can return array of jQuery objects which will be initialized as container in content area. By default, all first level sections under content area will be initialized\r// @option {Function}\r// @param {jQuery} contentArea\ronInitContentArea: function (contentArea) {\r},\r// Callback will be called before initializing container\r// @option {Function}\r// @param {jQuery} container\r// @param {jQuery} contentArea\ronBeforeInitContainer: function (container, contentArea) {\r},\r// Callback will be called when initializing container. It can return array of jQuery objects which will be initialized as editable components in container content (NOTE: these objects MUST be under elements which have attribute data-type=\"container-content\"). By default, all first level sections under container content will be initialized\r// @option {Function}\r// @param {jQuery} container\r// @param {jQuery} contentArea\ronInitContainer: function (container, contentArea) {\r},\r// Callback will be called before container is deleted\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedContainer\r// @param {jQuery} contentArea\ronBeforeContainerDeleted: function (event, selectedContainer, contentArea) {\r},\r// Callback will be called after container and its components are already deleted\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedContainer\r// @param {jQuery} contentArea\ronContainerDeleted: function (event, selectedContainer, contentArea) {\r},\r// Callback will be called when content of container is changed. It can be when container received new component from snippet or from other container. Or content of any components are changed or any components are deleted or duplicated\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} changedContainer\r// @param {jQuery} contentArea\ronContainerChanged: function (event, changedContainer, contentArea) {\r},\r// Callback will be called when a container is duplicated\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} originalContainer\r// @param {jQuery} newContainer\r// @param {jQuery} contentArea\ronContainerDuplicated: function (event, originalContainer, newContainer, contentArea) {\r},\r// Callback will be called when a container is selected\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedContainer\r// @param {jQuery} contentArea\ronContainerSelected: function (event, selectedContainer, contentArea) {\r},\r// Callback will be called when a container snippet is added in a content area\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} newContainer\r// @param {jQuery} selectedSnippet\r// @param {jQuery} contentArea\ronContainerSnippetAdded: function (event, newContainer, selectedSnippet, contentArea) {\r},\r// Callback will be called after component is initialized. This callback is available or not is depend on component type handler.\r// @option {Function}\r// @param {jQuery} component\ronComponentReady: function (component) {\r},\r// Callback will be called before initializing component\r// @option {Function}\r// @param {jQuery} component\r// @param {jQuery} contentArea\ronBeforeInitComponent: function (component, contentArea) {\r},\r// Callback will be called when initializing component\r// @option {Function}\r// @param {jQuery} component\r// @param {jQuery} contentArea\ronInitComponent: function (component, contentArea) {\r},\r// Callback will be called before a component is deleted\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedComponent\r// @param {jQuery} contentArea\ronBeforeComponentDeleted: function (event, selectedComponent, contentArea) {\r},\r// Callback will be called after a component is deleted\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedComponent\r// @param {jQuery} contentArea\ronComponentDeleted: function (event, selectedComponent, contentArea) {\r},\r// Callback will be called when content of a component is changed\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} changedComponent\r// @param {jQuery} contentArea\ronComponentChanged: function (event, changedComponent, contentArea) {\r},\r// Callback will be called when a component is duplicated\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} originalComponent\r// @param {jQuery} newComponent\r// @param {jQuery} contentArea\ronComponentDuplicated: function (event, originalComponent, newComponent, contentArea) {\r},\r// Callback will be called when a component is selected\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} selectedComponent\r// @param {jQuery} contentArea\ronComponentSelected: function (event, selectedComponent, contentArea) {\r},\r// Callback will be called after a component snippet is added in a container\r// @option {Function}\r// @param {Event} event\r// @param {jQuery} newComponent\r// @param {jQuery} selectedSnippet\r// @param {jQuery} contentArea\ronComponentSnippetAdded: function (event, newComponent, selectedSnippet, contentArea) {\r},\r// Callback will be called before loading dynamic content\r// @option {Function}\r// @param {jQuery} dynamicElement\r// @param {jQuery} component\r// @param {jQuery} contentArea\ronBeforeDynamicContentLoad: function (dynamicElement, component, contentArea) {\r},\r// Callback will be called after dynamic content is loaded\r// @option {Function}\r// @param {jQuery} dynamicElement\r// @param {jqXHR} , jqXHR\r// @param {jQuery} contentArea\ronDynamicContentLoaded: function (dynamicElement, jqXHR, contentArea) {\r},\r// Callback will be called if loading dynamic content is error, abort or timeout\r// @option {Function}\r// @param {jQuery} dynamicElement\r// @param {jqXHR} , jqXHR\r// @param {jQuery} contentArea\ronDynamicContentError: function (dynamicElement, jqXHR, contentArea) {\r}\r\n};\r","import $ from 'jquery';\rexport default (...args) => {\rif (console && typeof console.log === 'function' && $.keditor.debug) {\rconsole.log.apply(console, ['[ KEditor ] ', ...args]);\r}\r\n};\r\n","export default (message) => {\rthrow new Error(`[ KEditor ] ${message}`);\r\n};\r\n","export default {\rCONTENT_AREA: 0,\rCONTAINER: 1,\rSUB_CONTAINER: 2,\rCONTAINER_CONTENT: 3,\rSUB_CONTAINER_CONTENT: 4,\rCOMPONENT: 5\r\n};\r\n","import log from '../utils/log';\rexport default function (target) {\rlet self = this;\rlet options = self.options;\rlet sidebar = self.sidebar;\rlet sidebarTitle = sidebar.find('.keditor-sidebar-title');\rlet sidebarBody = sidebar.find('.keditor-sidebar-body');\rlet activeForm = sidebarBody.children('.active');\ractiveForm.removeClass('active');\rif (target.is('.keditor-component')) {\rself.setSettingComponent(target);\rself.setSettingContainer(null);\rlet componentType = self.getComponentType(target);\rlet componentData = KEditor.components[componentType];\rsidebarTitle.html(componentData.settingTitle);\rlet settingForm = sidebarBody.find(`.keditor-setting-${componentType}`);\rif (settingForm.length === 0) {\rlet componentData = KEditor.components[componentType];\rif (typeof componentData.initSettingForm === 'function') {\rsettingForm = $(`\r<div\rdata-type=\"${componentType}\"\rclass=\"keditor-ui keditor-setting-form keditor-setting-${componentType} clearfix active\"\r>\r</div>\r`);\rlet loadingText = $('<span />').html('Loading...');\rsidebarBody.append(settingForm);\rsettingForm.append(loadingText);\rlet initFunction = componentData.initSettingForm.call(componentData, settingForm, self);\r$.when(initFunction).done(function () {\rlog(`Initialized setting form for component type \"${componentType}\"`);\rsetTimeout(function () {\rloadingText.remove();\rif (typeof componentData.showSettingForm === 'function') {\rcomponentData.showSettingForm.call(componentData, settingForm, target, self);\r}\r}, 100);\r});\r}\r} else {\rif (typeof componentData.showSettingForm === 'function') {\rcomponentData.showSettingForm.call(componentData, settingForm, target, self);\r}\rsettingForm.addClass('active');\r}\r} else {\rself.setSettingContainer(target);\rself.setSettingComponent(null);\rsidebarTitle.html('Container Settings');\rlet settingForm = sidebar.find('.keditor-container-setting');\rif (typeof options.containerSettingShowFunction === 'function') {\roptions.containerSettingShowFunction.call(self, settingForm, target, self);\r}\rsettingForm.addClass('active');\r}\rsidebar.addClass('opened');\r\n};\r\n","import log from '../utils/log';\rexport default function () {\rlet self = this;\rlet options = self.options;\rlet sidebar = self.sidebar;\rlet activeForm = sidebar.find('.keditor-sidebar-body').children('.active');\rif (activeForm.length > 0) {\rif (activeForm.is('.keditor-container-setting')) {\rif (typeof options.containerSettingHideFunction === 'function') {\roptions.containerSettingHideFunction.call(self, activeForm, self);\r}\r} else {\rlet activeType = activeForm.attr('data-type');\rlet componentData = KEditor.components[activeType];\rif (typeof componentData.hideSettingForm === 'function') {\rcomponentData.hideSettingForm.call(componentData, activeForm, self);\r}\r}\ractiveForm.removeClass('active');\r}\rself.setSettingComponent(null);\rself.setSettingContainer(null);\rsidebar.removeClass('opened');\r\n}","import log from '../utils/log';\rexport default function (resp) {\rlog('renderSnippets');\rlet self = this;\rlet options = self.options;\rlet snippetsContainerHtml = '';\rlet snippetsComponentHtml = '';\rlet snippetsContentHtml = '';\rself.snippetsCategories = [];\rself.snippetsContainerCategories = [];\rself.snippetsComponentCategories = [];\r$(resp).filter('div').each(function (i) {\rlet snippet = $(this);\rlet snippetId = self.generateId('snippet');\rlet content = snippet.html().trim();\rlet previewUrl = snippet.attr('data-preview');\rlet type = snippet.attr('data-type');\rlet title = snippet.attr('data-keditor-title');\rlet categories = snippet.attr('data-keditor-categories') || '';\rlet snippetHtml = `\r<section\rclass=\"keditor-ui keditor-snippet\"\rdata-snippet=\"#${snippetId}\"\rdata-type=\"${type}\"\rtitle=\"${title}\"\rdata-keditor-categories=\"${categories}\"\r>\r<span><span style=\"background-image: url('${previewUrl}')\"></span></span>\r</section>\r`;\rcategories = categories.split(options.snippetsCategoriesSeparator);\rif (type === 'container') {\rsnippetsContainerHtml += snippetHtml;\rself.snippetsContainerCategories = self.snippetsContainerCategories.concat(categories);\r} else if (type.indexOf('component') !== -1) {\rsnippetsComponentHtml += snippetHtml;\rself.snippetsComponentCategories = self.snippetsComponentCategories.concat(categories);\r}\rlet dataAttributes = self.getDataAttributes(snippet, ['data-preview', 'data-type', 'data-keditor-title', 'data-keditor-categories'], true);\rsnippetsContentHtml += `<script id=\"${snippetId}\" type=\"text/html\" ${dataAttributes.join(' ')}>${content}</script>`;\r});\rself.snippetsContainerCategories = self.beautifyCategories(self.snippetsContainerCategories);\rself.snippetsComponentCategories = self.beautifyCategories(self.snippetsComponentCategories);\rself.snippetsCategories = self.beautifyCategories([...self.snippetsContainerCategories, ...self.snippetsComponentCategories]);\rif (options.explicitSnippetEnabled) {\rself.modal.find('.keditor-snippets-container').html(snippetsContainerHtml);\rself.modal.find('.keditor-snippets-component').html(snippetsComponentHtml);\r} else {\rself.modal.find('.keditor-snippets').html(snippetsContainerHtml + snippetsComponentHtml)\r}\rself.modal.find('.keditor-modal-body').append(snippetsContentHtml);\r\n};\r\n","export default {\rALL: 0,\rCONTAINER: 1,\rCOMPONENT: 2\r\n};\r\n","import error from '../utils/error';\r\nimport log from '../utils/log';\rexport default function (component) {\rlet self = this;\rlet options = self.options;\rlet componentType = (component.attr('data-type') || '').replace('component-', '');\rif (componentType && (componentType in KEditor.components)) {\rreturn componentType;\r} else {\rif (typeof options.defaultComponentType === 'string') {\rcomponentType = options.defaultComponentType;\r} else if (typeof options.defaultComponentType === 'function') {\rcomponentType = options.defaultComponentType.call(self, component);\r}\rif (!componentType) {\rerror('Component type is undefined!');\r}\rlog(`Fallback to defaultComponentType: ${componentType}`);\rreturn componentType;\r}\r\n};\r\n","import TOOLBAR_TYPE from \"../constants/toolbarType\";\r\nimport log from '../utils/log';\rexport default function (contentArea, container, component) {\rlog('initComponent', contentArea, container, component);\rlet self = this;\rlet options = self.options;\rlet body = self.body;\rif (!component.hasClass('keditor-initialized-component') || !component.hasClass('keditor-initializing-component')) {\rcomponent.addClass('keditor-initializing-component');\rcomponent.attr('id', self.generateId('component'));\rif (typeof options.onBeforeInitComponent === 'function') {\roptions.onBeforeInitComponent.call(self, component, contentArea);\r}\rlet componentContent = component.children('.keditor-component-content');\rcomponentContent.attr('id', self.generateId('component-content'));\rlet componentType = self.getComponentType(component);\rlog(`Component type: ${componentType}`);\rlet componentData = KEditor.components[componentType];\rlog('Render KEditor toolbar for component', component);\rcomponent.append(self.generateToolbar(TOOLBAR_TYPE.COMPONENT, componentData.settingEnabled));\rcomponent.find('[data-dynamic-href]').each(function () {\rlet dynamicElement = $(this);\rself.initDynamicContent(dynamicElement);\r});\rif (typeof componentData.init === 'function') {\rcomponentData.init.call(componentData, contentArea, container, component, self);\r} else {\rlog(`\"init\" function of component type \"${componentType}\" does not exist`);\r}\rif (typeof options.onInitComponent === 'function') {\roptions.onInitComponent.call(self, component, contentArea);\r}\rcomponent.addClass('keditor-initialized-component');\rcomponent.removeClass('keditor-initializing-component');\r} else {\rif (component.hasClass('keditor-initialized-component')) {\rlog('Component is already initialized!');\r} else {\rlog('Component is initializing...');\r}\r}\r\n};\r\n","import log from '../utils/log';\rexport default function (component) {\rlog('deleteComponent', component);\rlet self = this;\rlet componentType = self.getComponentType(component);\rlet componentData = KEditor.components[componentType];\rif (typeof componentData.destroy === 'function') {\rcomponentData.destroy.call(componentData, component, self);\r}\rcomponent.remove();\r\n};\r\n","import log from '../utils/log';\rexport default function (component) {\rlog('getComponentContent');\rlet self = this;\rlet clonedComponent = component.clone();\rlet componentType = self.getComponentType(clonedComponent);\rlet componentData = KEditor.components[componentType];\rlet dataAttributes = self.getDataAttributes(clonedComponent, null, true);\rlet content;\r// Handle iframe-wrapper\rlet iframeWrapper = component.find('.keditor-iframe-wrapper');\rif (iframeWrapper.length > 0) {\riframeWrapper.find('.keditor-iframe-cover').remove();\rlet iframe = iframeWrapper.children('iframe');\rif (iframeWrapper.hasClass('keditor-iframe-wrapper-fake')) {\riframe.unwrap();\r} else {\riframeWrapper.removeClass('keditor-iframe-wrapper');\r}\r}\rif (typeof componentData.getContent === 'function') {\rcontent = componentData.getContent.call(componentData, clonedComponent, self);\r} else {\rlet componentContent = clonedComponent.children('.keditor-component-content');\rcontent = componentContent.html();\r}\rclonedComponent.html(content).find('[data-dynamic-href]').each(function () {\r$(this).html('');\r});\rreturn `<section ${dataAttributes.join(' ')}>${clonedComponent.html()}</section>`;\r\n};\r\n","import DEFAULTS from './constants/defaults';\r\nimport CLASS_NAMES from './constants/classNames';\rexport default function (target, config) {\rlet self = this;\rlet element = self.element = target;\rlet options = self.options = $.extend({}, DEFAULTS, config);\rif (options.iframeMode) {\rself.initIframe();\r} else {\rself.window = window;\rself.body = $(document.body);\rlet originalContent = element.val() || element.html() || '';\rlet contentAreasWrapper = self.generateContentAreasWrapper(originalContent);\rif (element.is('textarea')) {\relement.after(contentAreasWrapper);\relement.addClass(CLASS_NAMES.HIDDEN_ELEMENT);\r} else {\relement.empty().append(contentAreasWrapper);\r}\rself.contentAreasWrapper = contentAreasWrapper;\r}\rself.initSidebar();\rself.initSnippetsModal();\rself.initContentAreas();\rif (!self.body.hasClass(CLASS_NAMES.CLICKS_INITIALIZED)) {\rself.initKEditorClicks();\r}\rself.id = self.generateId();\rKEditor.instances[self.id] = self;\rif (typeof options.onReady === 'function') {\roptions.onReady.call(self);\r}\r\n};","export default function () {\rlet self = this;\rlet element = self.element;\rlet id = self.id;\rlet content = self.getContent(false);\rif (self.options.iframeMode) {\rself.iframeWrapper.remove();\r} else {\rself.contentAreasWrapper.remove();\r}\rif (element.is('textarea')) {\relement.val(content);\r} else {\relement.html(content);\r}\relement.removeClass('keditor-hidden-element');\relement.data('keditor', null);\rdelete KEditor.instances[id];\r\n};\r\n","import $ from 'jquery';\rimport DEFAULTS from './constants/defaults';\rimport log from './utils/log';\r\nimport error from './utils/error';\r\nimport generateId from './utils/generateId';\r\nimport generateToolbar from './utils/generateToolbar';\r\nimport generateContentAreasWrapper from './utils/generateContentAreasWrapper';\r\nimport beautifyCategories from './utils/beautifyCategories';\r\nimport getDataAttributes from './utils/getDataAttributes';\r\nimport getClickedElement from './utils/getClickedElement';\r\nimport initKEditorClicks from './utils/initKEditorClicks';\rimport initIframe from './iframe/initIframe';\r\nimport initIframeCover from './iframe/initIframeCover';\rimport initSidebar from './sidebar/initSidebar';\r\nimport openSidebar from './sidebar/openSidebar';\r\nimport closeSidebar from './sidebar/closeSidebar';\rimport renderSnippets from './snippet/renderSnippets';\r\nimport initSnippetsFilter from './snippet/initSnippetsFilter';\rimport initSnippetsModal from './modal/initSnippetsModal';\r\nimport openModal from './modal/openModal';\r\nimport closeModal from './modal/closeModal';\rimport initContentAreas from './contentArea/initContentAreas';\r\nimport initContentArea from './contentArea/initContentArea';\rimport convertToContainer from './container/convertToContainer';\r\nimport initContainer from './container/initContainer';\r\nimport initContainerContent from './container/initContainerContent';\r\nimport getContainerContent from './container/getContainerContent';\rimport getComponentType from './component/getComponentType';\r\nimport convertToComponent from './component/convertToComponent';\r\nimport initComponent from './component/initComponent';\r\nimport initDynamicContent from './component/initDynamicContent';\r\nimport deleteComponent from './component/deleteComponent';\r\nimport getComponentContent from './component/getComponentContent';\rimport init from './init';\r\nimport destroy from './destroy';\r\nimport getContent from './getContent';\r\nimport setContent from './setContent';\rimport '../styles/keditor.less';\r// Check dependencies\r\nif (!$.fn.sortable) {\rerror('$.fn.sortable does not exist. Please import $.fn.sortable into your document for continue using KEditor.');\r\n}\r// KEditor class\r\nclass KEditor {\rstatic DEFAULTS = DEFAULTS;\rstatic debug = false;\rstatic version = '2.0.0';\rstatic instances = {};\rstatic components = {\rblank: {\rsettingEnabled: false\r}\r};\rstatic log(...args) {\rlog(...args);\r}\rstatic error(...args) {\rerror(...args);\r}\rstatic init(target, config) {\rreturn new KEditor(target, config);\r}\rconstructor(target, config) {\rreturn init.apply(this, [target, config]);\r}\rgenerateId(type) {\rreturn generateId.apply(this, [type]);\r}\rgenerateContentAreasWrapper(content) {\rreturn generateContentAreasWrapper.apply(this, [content]);\r}\rgenerateToolbar(type, isComponentConfigurable) {\rreturn generateToolbar.apply(this, [type, isComponentConfigurable]);\r}\rbeautifyCategories(categories) {\rreturn beautifyCategories.apply(this, [categories]);\r}\rsetSettingContainer(container) {\rthis.settingContainer = container;\r}\rgetSettingContainer() {\rreturn this.settingContainer;\r}\rsetSettingComponent(component) {\rthis.settingComponent = component;\r}\rgetSettingComponent() {\rreturn this.settingComponent;\r}\rgetDataAttributes(target, ignoreAttributes, isArray) {\rreturn getDataAttributes.apply(this, [target, ignoreAttributes, isArray]);\r}\rgetComponentType(component) {\rreturn getComponentType.apply(this, [component]);\r}\rgetClickedElement(event, selector) {\rreturn getClickedElement.apply(this, [event, selector]);\r}\r// Iframe\r//---------------------------------\rinitIframe() {\rreturn initIframe.apply(this);\r}\rinitIframeCover(iframe, wrapper) {\rreturn initIframeCover.apply(this, [iframe, wrapper]);\r}\r// KEditor clicks\r//---------------------------------\rinitKEditorClicks() {\rreturn initKEditorClicks.apply(this);\r}\r// Sidebar\r//---------------------------------\rinitSidebar() {\rreturn initSidebar.apply(this);\r}\ropenSidebar(target) {\rreturn openSidebar.apply(this, [target]);\r}\rcloseSidebar() {\rreturn closeSidebar.apply(this);\r}\r// Legacy methods. DEPRECATED\r//---------------------------------\rshowSettingPanel(target) {\rthis.openSidebar(target);\r}\rhideSettingPanel() {\rthis.closeSidebar();\r}\r// Snippet modal\r//---------------------------------\rinitSnippetsModal() {\rreturn initSnippetsModal.apply(this);\r}\rrenderSnippets(resp) {\rreturn renderSnippets.apply(this, [resp]);\r}\rinitSnippetsFilter(type) {\rreturn initSnippetsFilter.apply(this, [type]);\r}\ropenModal(target, snippetType) {\rreturn openModal.apply(this, [target, snippetType]);\r}\rcloseModal() {\rreturn closeModal.apply(this);\r}\r// Content areas\r//---------------------------------\rinitContentAreas() {\rreturn initContentAreas.apply(this);\r}\rinitContentArea(contentArea, dontInitToolbar) {\rreturn initContentArea.apply(this, [contentArea, dontInitToolbar]);\r}\r// Containers\r//---------------------------------\rconvertToContainer(contentArea, target) {\rreturn convertToContainer.apply(this, [contentArea, target]);\r}\rinitContainer(contentArea, container) {\rreturn initContainer.apply(this, [contentArea, container]);\r}\rinitContainerContent(contentArea, container, containerContent, isNested) {\rreturn initContainerContent.apply(this, [contentArea, container, containerContent, isNested]);\r}\r// Components\r//---------------------------------\rconvertToComponent(contentArea, container, target, isExisting) {\rreturn convertToComponent.apply(this, [contentArea, container, target, isExisting]);\r}\rinitComponent(contentArea, container, component) {\rreturn initComponent.apply(this, [contentArea, container, component]);\r}\rinitDynamicContent(dynamicElement) {\rreturn initDynamicContent.apply(this, [dynamicElement]);\r}\rdeleteComponent(component) {\rreturn deleteComponent.apply(this, [component]);\r}\r// Get content\r//---------------------------------\rgetComponentContent(component) {\rreturn getComponentContent.apply(this, [component]);\r}\rgetContainerContent(container, isNested) {\rreturn getContainerContent.apply(this, [container, isNested]);\r}\rgetContent(inArray) {\rreturn getContent.apply(this, [inArray]);\r}\r// Set content\r//---------------------------------\rsetContent(content, contentArea) {\rreturn setContent.apply(this, [content, contentArea]);\r}\r// Destroy\r//---------------------------------\rdestroy() {\rreturn destroy.apply(this);\r}\r\n}\r// KEditor plugins\r\n$.fn.keditor = function (options) {\rlet element = $(this);\rlet instance = element.data('keditor');\rif (typeof options === 'string') {\rif (instance && instance[options] && typeof instance[options] === 'function') {\rreturn instance[options].apply(instance, Array.prototype.slice.call(arguments, 1));\r}\r} else {\rif (!instance) {\rinstance = KEditor.init(element, options);\relement.data('keditor', instance);\r}\rreturn instance;\r}\r\n};\rwindow.KEditor = $.keditor = $.fn.keditor.constructor = KEditor;\r\n","export default (type = '') => {\rlet timestamp = (new Date()).getTime();\rlet random = Math.round(Math.random() * 9876543210);\rreturn `keditor-${type}-${timestamp}${random}`;\r\n};\r\n","export default function (content) {\rlet self = this;\rlet options = self.options;\rlet contentAreasWrapper = $(options.contentAreasWrapper || '<div />');\rcontentAreasWrapper.attr('class', 'keditor-ui keditor-content-area-wrapper');\rif (!contentAreasWrapper.attr('id')) {\rcontentAreasWrapper.attr('id', self.generateId('content-area-wrapper'));\r}\rcontentAreasWrapper.html(content);\rreturn contentAreasWrapper;\r\n};\r\n","import TOOLBAR_TYPE from '../constants/toolbarType';\rexport default function (type, isComponentConfigurable) {\rlet self = this;\rlet options = self.options;\rlet settingBtn = '';\rif (!options.explicitSnippetEnabled) {\rlet toolbarClass = '';\rswitch (type) {\rcase  TOOLBAR_TYPE.CONTENT_AREA:\rtoolbarClass = 'keditor-content-area-toolbar';\rcase  TOOLBAR_TYPE.CONTAINER_CONTENT:\rcase  TOOLBAR_TYPE.SUB_CONTAINER_CONTENT:\rtoolbarClass = 'keditor-container-content-toolbar';\rreturn (`\r<div class=\"keditor-ui ${toolbarClass}\">\r<a href=\"javascript:void(0)\" class=\"keditor-ui keditor-btn keditor-btn-default btn-add-content\" title=\"Add content\">${options.btnAddContentText}</a>\r</div>\r`);\rdefault:\r// Do nothing\r}\r}\rswitch (type) {\rcase  TOOLBAR_TYPE.CONTENT_AREA:\rreturn (`\r<div class=\"keditor-ui keditor-content-area-toolbar\">\r<a href=\"javascript:void(0)\" class=\"keditor-ui keditor-btn keditor-btn-default btn-add-container\" title=\"Add container\">${options.btnAddContainerText}</a>\r</div>\r`);\rcase  TOOLBAR_TYPE.CONTAINER:\rif (options.containerSettingEnabled === true) {\rsettingBtn = `<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-setting\">${options.btnSettingContainerText}</a>`;\r}\rreturn (`\r<div class=\"keditor-toolbar keditor-toolbar-container\">\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-reposition\">${options.btnMoveContainerText}</a>\r${settingBtn}\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-duplicate\">${options.btnDuplicateContainerText}</a>\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-delete\">${options.btnDeleteContainerText}</a>\r</div>\r`);\rcase  TOOLBAR_TYPE.SUB_CONTAINER:\rif (options.containerSettingEnabled === true) {\rsettingBtn = `<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-setting\">${options.btnSettingContainerText}</a>`;\r}\rreturn (`\r<div class=\"keditor-toolbar keditor-toolbar-container keditor-toolbar-sub-container\">\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-reposition\">${options.btnMoveContainerText}</a>\r${settingBtn}\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-duplicate\">${options.btnDuplicateContainerText}</a>\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-container-delete\">${options.btnDeleteContainerText}</a>\r</div>\r`);\rcase  TOOLBAR_TYPE.CONTAINER_CONTENT:\rreturn (`\r<div class=\"keditor-ui keditor-container-content-toolbar keditor-btn-group\">\r<a href=\"javascript:void(0)\" class=\"keditor-ui keditor-btn keditor-btn-default btn-add-container\" title=\"Add sub-container\">${options.btnAddSubContainerText}</a>\r<a href=\"javascript:void(0)\" class=\"keditor-ui keditor-btn keditor-btn-default btn-add-component\" title=\"Add component\">${options.btnAddComponentText}</a>\r</div>\r`);\rcase  TOOLBAR_TYPE.SUB_CONTAINER_CONTENT:\rreturn (`\r<div class=\"keditor-ui keditor-container-content-toolbar\">\r<a href=\"javascript:void(0)\" class=\"keditor-ui keditor-btn keditor-btn-default btn-add-component\" title=\"Add component\">${options.btnAddComponentText}</a>\r</div>\r`);\rcase  TOOLBAR_TYPE.COMPONENT:\rif (isComponentConfigurable) {\rsettingBtn = `<a href=\"javascript:void(0);\" class=\"keditor-ui btn-component-setting\">${options.btnSettingComponentText}</a>`;\r}\rreturn (`\r<div class=\"keditor-toolbar keditor-toolbar-component\">\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-component-reposition\">${options.btnMoveComponentText}</a>\r${settingBtn}\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-component-duplicate\">${options.btnDuplicateComponentText}</a>\r<a href=\"javascript:void(0);\" class=\"keditor-ui btn-component-delete\">${options.btnDeleteComponentText}</a>\r</div>\r`);\rdefault:\r// Do nothing\r}\r\n};\r\n","export default function (categories) {\rlet newArray = [];\rfor (let i = 0; i < categories.length; i++) {\rlet category = categories[i] || '';\rif (category !== '' && $.inArray(category, newArray) === -1) {\rnewArray.push(category);\r}\r}\rreturn newArray.sort();\r\n};\r\n","export default function (target, ignoreAttributes, isArray) {\rlet dataAttributes = isArray ? [] : {};\rif (!ignoreAttributes) {\rignoreAttributes = [];\r}\r$.each(target.get(0).attributes, function (i, attr) {\rif (attr.name.indexOf('data-') === 0 && $.inArray(attr.name, ignoreAttributes) === -1) {\rif (isArray) {\rdataAttributes.push(`${attr.name}=\"${attr.value}\"`);\r} else {\rdataAttributes[attr.name] = attr.value;\r}\r}\r});\rreturn dataAttributes;\r\n};\r\n","export default function (event, selector) {\rlet target = $(event.target);\rlet closest = target.closest(selector);\rif (target.is(selector)) {\rreturn target;\r} else if (closest.length > 0) {\rreturn closest;\r} else {\rreturn null;\r}\r\n};\r\n","import log from '../utils/log';\rexport default function () {\rlet self = this;\rlet options = self.options;\rlet element = self.element;\rlet originalContent = element.is('textarea') ? element.val() : element.html();\rlet wrapper = self.iframeWrapper = $('<div class=\"keditor-ui keditor-iframe-wrapper\"></div>');\rlet iframe = self.iframe = $('<iframe class=\"keditor-ui keditor-iframe\"></iframe>');\relement.after(wrapper);\rwrapper.attr('id', self.generateId('iframe-wrapper')).append(iframe);\relement.addClass('keditor-hidden-element');\rlet iframeDoc = self.iframeDoc = iframe.contents();\r// Fix issue Firefox can't render content inside iframe\r// ======================================================\riframeDoc.get(0).open();\riframeDoc.get(0).close();\r// ======================================================\rself.window = iframe[0].contentWindow ? iframe[0].contentWindow : iframe[0].contentDocument.defaultView;\rlet iframeHead = self.iframeHead = iframeDoc.find('head');\rlet iframeBody = self.iframeBody = self.body = iframeDoc.find('body');\rlog('Adding styles to iframe...');\rlet styles = '';\r$('[data-type=\"keditor-style\"]').each(function () {\rlet style = $(this);\rlet href = style.attr('href') || style.attr('data-href') || '';\rif (href) {\rstyles += `<link rel=\"stylesheet\" type=\"text/css\" href=\"${href}\" />\\n`;\r} else {\rstyles += `<style type=\"text/css\">${style.html()}</style>\\n`;\r}\r});\rif (options.contentStyles && $.isArray(options.contentStyles)) {\r$.each(options.contentStyles, function (i, style) {\rlet idStr = '';\rif (style.id) {\ridStr = ` id=\"${style.id}\" `;\r}\rif (style.href) {\rstyles += `<link rel=\"stylesheet\" type=\"text/css\" href=\"${style.href}\" ${idStr} />\\n`;\r} else {\rstyles += `<style type=\"text/css\" ${idStr}>${style.content}</style>\\n`;\r}\r});\r}\riframeHead.append(styles);\rlog('Adding original content to iframe...');\rlet contentAreasWrapper = self.generateContentAreasWrapper(originalContent);\riframeBody.append(contentAreasWrapper);\rself.contentAreasWrapper = contentAreasWrapper;\rif (typeof options.onInitIframe === 'function') {\roptions.onInitIframe.call(self, iframe, iframeHead, iframeBody);\r}\r\n};\r\n","import log from '../utils/log';\rexport default function (iframe, wrapper) {\rif (!wrapper) {\riframe.wrap('<div class=\"keditor-iframe-wrapper-fake\"></div>');\rwrapper = iframe.parent();\r}\rwrapper.addClass('keditor-iframe-wrapper');\rlet cover = $('<div class=\"keditor-iframe-cover\"></div>');\rwrapper.prepend(cover);\rwrapper.on('mouseleave', function () {\rwrapper.removeClass('hidden-cover');\r});\rcover.on('dblclick', function (e) {\re.preventDefault();\rwrapper.addClass('hidden-cover');\r});\r\n};\r\n","import log from '../utils/log';\rexport default function () {\rlog('initKEditorClicks');\rlet self = this;\rlet options = self.options;\rlet body = self.body;\rbody.on('click', function (e) {\rlet sidebar = self.getClickedElement(e, '.keditor-sidebar');\rlet modal = self.getClickedElement(e, '.keditor-modal');\rlet container = self.getClickedElement(e, '.keditor-container');\rif (container) {\rif (!container.hasClass('showed-keditor-toolbar')) {\rbody.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rbody.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rcontainer.addClass('showed-keditor-toolbar');\rlet contentArea = container.parent();\rif (typeof options.onContainerSelected === 'function') {\roptions.onContainerSelected.call(self, e, container, contentArea);\r}\r}\r} else {\rif (!sidebar && !modal) {\rbody.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rbody.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\r}\r}\rlet component = self.getClickedElement(e, '.keditor-component');\rif (component) {\rif (!component.hasClass('showed-keditor-toolbar')) {\rbody.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rcomponent.addClass('showed-keditor-toolbar');\rlet contentArea = component.parent();\rif (typeof options.onComponentSelected === 'function') {\roptions.onComponentSelected.call(self, e, component, contentArea);\r}\r}\r} else {\rif (!sidebar) {\rbody.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\r}\r}\r});\rbody.on('click', '.btn-container-setting', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-container-setting', btn);\rlet container = btn.closest('.keditor-container');\rif (body.hasClass('opened-keditor-setting') && body.hasClass('opened-keditor-sidebar')) {\rif (!container.is(self.settingContainer)) {\rself.openSidebar(container);\r} else {\rself.closeSidebar();\r}\r} else {\rself.openSidebar(container);\r}\r});\rbody.on('click', '.btn-container-duplicate', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-container-duplicate', btn);\rlet container = btn.closest('.keditor-container');\rlet contentArea = container.parent();\rlet newContainer = $(self.getContainerContent(container, btn.parent().hasClass('keditor-toolbar-sub-container')));\rcontainer.after(newContainer);\rself.convertToContainer(contentArea, newContainer);\rlog('Container is duplicated');\rif (typeof options.onContainerDuplicated === 'function') {\roptions.onContainerDuplicated.call(self, container, newContainer, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\r});\rbody.on('click', '.btn-container-delete', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-container-delete', btn);\rif (confirm(options.confirmDeleteContainerText)) {\rlet container = btn.closest('.keditor-container');\rlet components = container.find('.keditor-component');\rlet contentArea = container.parent();\rif (typeof options.onBeforeContainerDeleted === 'function') {\roptions.onBeforeContainerDeleted.call(self, e, container, contentArea);\r}\rlet settingComponent = self.settingComponent;\rif (settingComponent) {\rlet settingComponentParent = settingComponent.closest('.keditor-container');\rif (settingComponentParent.is(container)) {\rlog('Deleting container is container of setting container. Close setting panel for this setting component', settingComponent);\rself.closeSidebar();\r}\r} else if (container.is(self.settingContainer)) {\rlog('Deleting container is setting container. Close setting panel for this container', container);\rself.closeSidebar();\r}\rif (components.length > 0) {\rcomponents.each(function () {\rself.deleteComponent($(this));\r});\r}\rcontainer.remove();\rif (typeof options.onContainerDeleted === 'function') {\roptions.onContainerDeleted.call(self, e, container, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\r}\r});\rbody.on('click', '.btn-component-setting', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-component-setting', btn);\rlet component = btn.closest('.keditor-component');\rif (body.hasClass('opened-keditor-setting') && body.hasClass('opened-keditor-sidebar')) {\rif (!component.is(self.settingComponent())) {\rself.openSidebar(component);\r} else {\rself.closeSidebar();\r}\r} else {\rself.openSidebar(component);\r}\r});\rbody.on('click', '.btn-component-duplicate', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-component-duplicate', btn);\rlet component = btn.closest('.keditor-component');\rlet container = component.closest('.keditor-container');\rlet contentArea = container.parent();\rlet newComponent = $(self.getComponentContent(component));\rcomponent.after(newComponent);\rself.convertToComponent(contentArea, container, newComponent);\rlog('Component is duplicated');\rif (typeof options.onComponentDuplicated === 'function') {\roptions.onComponentDuplicated.call(self, component, newComponent, contentArea);\r}\rif (typeof options.onContainerChanged === 'function') {\roptions.onContainerChanged.call(self, e, container, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\r});\rbody.on('click', '.btn-component-delete', function (e) {\re.preventDefault();\rlet btn = $(this);\rlog('Click on .btn-component-delete', btn);\rif (confirm(options.confirmDeleteComponentText)) {\rlet component = btn.closest('.keditor-component');\rlet container = component.closest('.keditor-container');\rlet contentArea = component.closest('.keditor-content-area');\rif (typeof options.onBeforeComponentDeleted === 'function') {\roptions.onBeforeComponentDeleted.call(self, e, component, contentArea);\r}\rif (component.is(self.settingComponent)) {\rself.closeSidebar();\r}\rself.deleteComponent(component);\rif (typeof options.onComponentDeleted === 'function') {\roptions.onComponentDeleted.call(self, e, component, contentArea);\r}\rif (typeof options.onContainerChanged === 'function') {\roptions.onContainerChanged.call(self, e, container, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\r}\r});\rbody.addClass('keditor-clicks-initialized');\r\n};\r\n","import error from \"../utils/error\";\r\nimport log from '../utils/log';\rexport default function () {\rlet self = this;\rlet options = self.options;\rlet sidebarId = self.generateId('sidebar');\rlet sidebar = self.sidebar = $(`\r<div class=\"keditor-ui keditor-sidebar\" id=\"${sidebarId}\">\r<div class=\"keditor-ui keditor-sidebar-header\">\r<span class=\"keditor-ui keditor-sidebar-title\"></span>\r<a href=\"javascript:void(0);\" class=\"keditor-ui keditor-sidebar-close\">&times;</a>\r</div>\r<div class=\"keditor-ui keditor-sidebar-body\"></div>\r</div>\r`);\rsidebar.find('.keditor-sidebar-close').on('click', function (e) {\re.preventDefault();\rself.closeSidebar();\r});\rlet sidebarBody = sidebar.find('.keditor-sidebar-body');\rsidebarBody.on('submit', 'form', function (e) {\re.preventDefault();\rreturn false;\r});\rif (options.containerSettingEnabled === true) {\rif (typeof options.containerSettingInitFunction === 'function') {\rlet form = $('<div  class=\"keditor-ui keditor-setting-form keditor-container-setting\"></div>');\rsidebarBody.append(form);\rlog('Initialize container setting panel');\roptions.containerSettingInitFunction.call(self, form, self);\r} else {\rerror('\"containerSettingInitFunction\" is not function!');\r}\r}\rsidebar.appendTo(options.iframeMode ? self.iframeWrapper : self.body);\r\n};\r\n","import SNIPPET_TYPE from '../constants/snippetType';\r\nimport error from '../utils/error';\r\nimport log from '../utils/log';\rexport default function () {\rlet self = this;\rlet options = self.options;\rlet modalId = self.generateId('modal');\rlet snippetsWrapperHtml = '';\rif (options.explicitSnippetEnabled) {\rsnippetsWrapperHtml = `\r<div class=\"keditor-snippets-wrapper keditor-snippets-wrapper-container\">\r<div class=\"keditor-snippets keditor-snippets-container\"></div>\r</div>\r<div class=\"keditor-snippets-wrapper keditor-snippets-wrapper-component\">\r<div class=\"keditor-snippets keditor-snippets-component\"></div>\r</div>\r`;\r} else {\rsnippetsWrapperHtml = `\r<div class=\"keditor-snippets-wrapper\">\r<div class=\"keditor-snippets\"></div>\r</div>\r`;\r}\rlet modal = self.modal = $(`\r<div class=\"keditor-ui keditor-modal\" id=\"${modalId}\">\r<div class=\"keditor-modal-header\">\r<button type=\"button\" class=\"keditor-modal-close\">&times;</button>\r<h4 class=\"keditor-modal-title\"></h4>\r</div>\r<div class=\"keditor-modal-body\">${snippetsWrapperHtml}</div>\r<div class=\"keditor-modal-footer\">\r<button type=\"button\" class=\"keditor-ui keditor-btn keditor-btn-default keditor-modal-close\">Close</button>\r<button type=\"button\" class=\"keditor-ui keditor-btn keditor-btn-primary keditor-modal-add\">Add</button>\r</div>\r</div>\r`);\rif (typeof options.snippetsUrl === 'string' && options.snippetsUrl.length > 0) {\rlog(`Getting snippets form \"${options.snippetsUrl}\"...`);\r$.ajax({\rtype: 'get',\rdataType: 'html',\rurl: options.snippetsUrl,\rsuccess: function (resp) {\rlog('Success in getting snippets');\rif (typeof options.onSnippetsLoaded === 'function') {\rresp = options.onSnippetsLoaded.call(self, resp) || resp;\r}\rself.renderSnippets(resp);\rif (options.snippetsFilterEnabled) {\rif (options.explicitSnippetEnabled) {\rself.initSnippetsFilter(SNIPPET_TYPE.CONTAINER);\rself.initSnippetsFilter(SNIPPET_TYPE.COMPONENT);\r} else {\rself.initSnippetsFilter(SNIPPET_TYPE.ALL);\r}\r}\r},\rerror: function (jqXHR) {\rlog('Error when getting snippets', jqXHR);\rif (typeof options.onSnippetsError === 'function') {\roptions.onSnippetsError.call(self, jqXHR);\r}\r}\r});\r// Close buttons\rmodal.find('.keditor-modal-close').on('click', function (e) {\re.preventDefault();\rself.closeModal();\r});\r// Add button\rmodal.find('.keditor-modal-add').on('click', function (e) {\re.preventDefault();\rlet selectedSnippet = modal.find('.keditor-snippets-wrapper .selected');\rif (selectedSnippet.length === 0) {\rreturn;\r}\rlet contentArea = self.modalTarget.closest('.keditor-content-area');\rlet snippetType = selectedSnippet.attr('data-type');\rlet snippetContentElement = modal.find(selectedSnippet.attr('data-snippet'));\rlet snippetContent = snippetContentElement.html();\rlet isAddingContainer = false;\rlet isAddingComponent = false;\rlet isAddingComponentWithContainer = false;\rif (options.explicitSnippetEnabled) {\rswitch (self.modalSnippetType) {\rcase SNIPPET_TYPE.COMPONENT:\risAddingComponent = true;\rbreak;\rcase SNIPPET_TYPE.CONTAINER:\risAddingContainer = true;\rbreak;\rdefault:\r// Do nothing\r}\r} else {\rif (snippetType === 'container') {\risAddingContainer = true;\r} else {\rswitch (self.modalSnippetType) {\rcase SNIPPET_TYPE.COMPONENT:\risAddingComponent = true;\rbreak;\rcase SNIPPET_TYPE.ALL:\rif (self.modalTarget.is('.keditor-container-content-inner')) {\risAddingComponent = true;\r} else {\risAddingComponentWithContainer = true;\r}\rbreak;\rdefault:\r// Do nothing\r}\r}\r}\rlet newContainer;\rlet newComponent;\rif (isAddingContainer) {\rself.body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rnewContainer = $(`\r<section class=\"keditor-ui keditor-container showed-keditor-toolbar\">\r<section class=\"keditor-ui keditor-container-inner\">${snippetContent}</section>\r</section>\r`);\rself.modalTarget.append(newContainer);\rif (typeof options.onContainerSnippetAdded === 'function') {\roptions.onContainerSnippetAdded.call(self, e, newContainer, selectedSnippet, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\rself.initContainer(contentArea, newContainer);\r}\rif (isAddingComponent) {\rlet dataAttributes = self.getDataAttributes(snippetContentElement, null, true);\rnewComponent = $(`\r<section class=\"keditor-ui keditor-component\" data-type=\"${snippetType}\" ${dataAttributes.join(' ')}>\r<section class=\"keditor-ui keditor-component-content\">${snippetContent}</section>\r</section>\r`);\rself.modalTarget.append(newComponent);\rlet container = self.modalTarget.closest('.keditor-container');\rif (typeof options.onComponentSnippetAdded === 'function') {\roptions.onComponentSnippetAdded.call(self, e, newComponent, selectedSnippet, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\rself.initComponent(contentArea, container, newComponent);\r}\rif (isAddingComponentWithContainer) {\rself.body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rlet dataAttributes = self.getDataAttributes(snippetContentElement, null, true);\rnewContainer = $(`\r<section class=\"keditor-ui keditor-container showed-keditor-toolbar\">\r<section class=\"keditor-ui keditor-container-inner\">${options.containerForQuickAddComponent}</section>\r</section>\r`);\rnewComponent = $(`\r<section class=\"keditor-ui keditor-component\" data-type=\"${snippetType}\" ${dataAttributes.join(' ')}>\r<section class=\"keditor-ui keditor-component-content\">${snippetContent}</section>\r</section>\r`);\rnewContainer.find('[data-type=\"container-content\"]').eq(0).html(newComponent);\rself.modalTarget.append(newContainer);\rif (typeof options.onComponentSnippetAdded === 'function') {\roptions.onComponentSnippetAdded.call(self, e, newComponent, selectedSnippet, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, e, contentArea);\r}\rself.initContainer(contentArea, newContainer);\r}\rself.closeModal();\r});\r// Action click for snippet\rmodal.on('click', '.keditor-snippet', function (e) {\re.preventDefault();\rlet snippet = $(this);\rif (!snippet.hasClass('selected')) {\rsnippet.parent().find('.selected').removeClass('selected');\rsnippet.addClass('selected');\r}\r});\rlet cssTransitionEnd = 'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend';\rmodal.on(cssTransitionEnd, () => {\rif (!modal.hasClass('showed')) {\rmodal.css('display', 'none');\r$(document.body).removeClass('opened-modal');\r}\r});\rmodal.appendTo(document.body);\r} else {\rerror('\"snippetsUrl\" must be not null!');\r}\r\n};\r\n","import SNIPPET_TYPE from '../constants/snippetType';\r\nimport log from '../utils/log';\rexport default function (type) {\rlog('initSnippetsFilter');\rlet self = this;\rlet options = self.options;\rlet modal = self.modal;\rlet categories;\rlet snippetsWrapperSelector;\rswitch (type) {\rcase SNIPPET_TYPE.ALL:\rcategories = self.snippetsCategories;\rsnippetsWrapperSelector = '.keditor-snippets-wrapper';\rbreak;\rcase SNIPPET_TYPE.CONTAINER:\rcategories = self.snippetsContainerCategories;\rsnippetsWrapperSelector = '.keditor-snippets-wrapper-container';\rbreak;\rcase SNIPPET_TYPE.COMPONENT:\rcategories = self.snippetsComponentCategories;\rsnippetsWrapperSelector = '.keditor-snippets-wrapper-component';\rbreak;\rdefault:\r// Do nothing\r}\rlet categoriesOptions = '';\r$.each(categories, function (i, category) {\rcategoriesOptions += `<option value=\"${category}\">${category}</option>`;\r});\rlet snippetsWrapper = modal.find(snippetsWrapperSelector);\rlet snippets = snippetsWrapper.find('.keditor-snippets').children('.keditor-snippet');\rsnippetsWrapper.prepend(`\r<div class=\"keditor-ui keditor-snippets-filter-wrapper\">\r<select class=\"keditor-ui keditor-snippets-filter\">\r<option value=\"\" selected=\"selected\">All</option>\r${categoriesOptions}\r</select>\r<input type=\"text\" class=\"keditor-ui keditor-snippets-search\" value=\"\" placeholder=\"Type to search...\" />\r</div>\r`);\rsnippets.each(function () {\rlet snippet = $(this);\rlet categories = snippet.attr('data-keditor-categories') || '';\rlet filterCategories = categories.toLowerCase();\rcategories = categories.split(options.snippetsCategoriesSeparator);\rfilterCategories = filterCategories.split(options.snippetsCategoriesSeparator);\rsnippet.data('categories', categories);\rsnippet.data('categoriesFilter', filterCategories);\r});\rlet txtSearch = snippetsWrapper.find('.keditor-snippets-search');\rlet cbbFilter = snippetsWrapper.find('.keditor-snippets-filter');\rlet doFilter = function () {\rlet selectedCategory = (cbbFilter.val() || '').toLowerCase();\rlet searchText = (txtSearch.val() || '').toLowerCase();\rsnippets.filter('.selected').removeClass('selected');\rif (selectedCategory || searchText) {\rlog('Filtering snippets');\rsnippets.each(function () {\rlet snippet = $(this);\rlet dataCategories = snippet.data('categoriesFilter');\rlet dataCategoriesString = dataCategories.join(';');\rlet error = 0;\rif (selectedCategory) {\rif ($.inArray(selectedCategory, dataCategories) === -1) {\rerror++;\r}\r}\rif (searchText) {\rlet title = snippet.attr('title').toLowerCase();\rif (title.indexOf(searchText) === -1 && dataCategoriesString.indexOf(searchText) === -1) {\rerror++;\r}\r}\rsnippet[error === 0 ? 'removeClass' : 'addClass']('not-matched');\r});\r} else {\rlog('Show all snippets');\rsnippets.removeClass('not-matched');\r}\r};\rcbbFilter.on('change', function () {\rdoFilter();\r});\rlet timer;\rtxtSearch.on('keydown', function () {\rclearTimeout(timer);\rtimer = setTimeout(doFilter, 200);\r});\r\n};\r\n","import SNIPPET_TYPE from '../constants/snippetType';\r\nimport log from '../utils/log';\rexport default function (target, snippetType) {\rlog('openModal', target, snippetType);\rlet self = this;\rlet modal = self.modal;\rlet options = self.options;\rlet modalTitle = '';\rswitch (snippetType) {\rcase SNIPPET_TYPE.CONTAINER:\rmodalTitle = 'Add container';\rbreak;\rcase SNIPPET_TYPE.COMPONENT:\rmodalTitle = 'Add component';\rbreak;\rdefault:\r// Do nothing\r}\rif (options.explicitSnippetEnabled) {\rmodal.find('.keditor-snippets-wrapper').css('display', 'none');\rmodal.find(snippetType === SNIPPET_TYPE.COMPONENT ? '.keditor-snippets-wrapper-component' : '.keditor-snippets-wrapper-container').css('display', 'block');\r} else {\rmodal.find('.keditor-snippets-wrapper').css('display', 'block').find('.keditor-snippet[data-type=container]').css('display', snippetType === SNIPPET_TYPE.COMPONENT ? 'none' : 'block');\rmodalTitle = 'Add content';\r}\rmodal.find('.keditor-modal-title').html(modalTitle);\rself.modalTarget = target;\rself.modalSnippetType = snippetType;\rmodal.css('display', 'block');\r$(document.body).addClass('opened-modal');\rsetTimeout(() => {\rmodal.addClass('showed');\r}, 0);\r\n};\r\n","export default function () {\rlet self = this;\rlet modal = self.modal;\rself.modalTarget = null;\rself.modalAction = null;\rmodal.find('.keditor-modal-title').html('');\rmodal.find('.keditor-snippets-wrapper .selected').removeClass('selected');\rmodal.removeClass('showed');\r\n};\r\n","import log from '../utils/log';\rexport default function () {\rlog('initContentAreas');\rlet self = this;\rlet contentAreasWrapper = self.contentAreasWrapper;\rlet options = self.options;\rlet contentAreas;\rif (options.contentAreasSelector) {\rcontentAreas = contentAreasWrapper.find(options.contentAreasSelector);\r}\rif (!contentAreas || contentAreas.length === 0) {\rlog('Do not find any content area. Creating default content area...');\rlet originalContent = contentAreasWrapper.html();\rcontentAreas = $('<div />').html(originalContent);\rcontentAreasWrapper.empty().append(contentAreas);\r}\rcontentAreas.each(function () {\rlet contentArea = $(this);\rif (!contentArea.attr('id')) {\rcontentArea.attr('id', self.generateId('content-area'));\r}\rself.initContentArea(contentArea);\r});\r\n};\r\n","import TOOLBAR_TYPE from \"../constants/toolbarType\";\r\nimport SNIPPET_TYPE from \"../constants/snippetType\";\r\nimport log from '../utils/log';\rexport default function (contentArea, dontInitToolbar) {\rlog('initContentArea', contentArea);\rlet self = this;\rlet options = self.options;\rcontentArea.addClass('keditor-content-area');\rlet content = contentArea.html();\rlet contentAreaInner = $('<div class=\"keditor-content-area-inner\"></div>').html(content);\rcontentArea.html(contentAreaInner);\rif (typeof options.onBeforeInitContentArea === 'function') {\roptions.onBeforeInitContentArea.call(self, contentArea);\r}\rif (!dontInitToolbar) {\rlet contentAreaToolbar = $(self.generateToolbar(TOOLBAR_TYPE.CONTENT_AREA));\rcontentArea.append(contentAreaToolbar);\rcontentAreaToolbar.children(options.explicitSnippetEnabled ? '.btn-add-container' : '.btn-add-content').on('click', function (e) {\re.preventDefault();\rself.openModal(contentAreaInner, options.explicitSnippetEnabled ? SNIPPET_TYPE.CONTAINER : SNIPPET_TYPE.ALL);\r});\r}\rlog('Initialize $.fn.sortable for content area');\rcontentAreaInner.sortable({\rhandle: '.keditor-toolbar-container:not(.keditor-toolbar-sub-container) .btn-container-reposition',\ritems: '> section',\rhelper: 'clone',\rconnectWith: '.keditor-content-area',\raxis: 'y',\rtolerance: 'pointer',\rsort: function () {\r$(this).removeClass('ui-state-default');\r},\rreceive: function (event, ui) {\rlog('On received snippet', event, ui);\rlet helper = ui.helper;\rlet item = ui.item;\rif (helper) {\rhelper.remove();\r}\rself.closeSidebar();\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, event, contentArea);\r}\ritem.addClass('keditor-ui-dragging');\r},\rstart: function (e, ui) {\rui.item.addClass('keditor-ui-dragging');\r},\rstop: function (e, ui) {\rif (ui.helper) {\rui.helper.remove();\r}\rui.item.removeClass('keditor-ui-dragging');\r}\r});\rlog('Initialize existing containers in content area');\rcontentAreaInner.children('section').each(function () {\rself.convertToContainer(contentArea, $(this));\r});\rif (typeof options.onInitContentArea === 'function') {\rlet contentData = options.onInitContentArea.call(self, contentArea);\rif (contentData && contentData.length > 0) {\r$.each(contentData, function () {\rself.convertToContainer(contentArea, $(this));\r});\r}\r}\r\n};\r\n","import log from '../utils/log';\rexport default function (contentArea, target) {\rlog('convertToContainer', contentArea, target);\rlet self = this;\rlet container;\rif (target.is('section')) {\rtarget.addClass('keditor-ui keditor-container');\rtarget.wrapInner('<section class=\"keditor-ui keditor-container-inner\"></section>');\rcontainer = target;\r} else {\rtarget.wrap('<section class=\"keditor-ui keditor-container\"><section class=\"keditor-ui keditor-container-inner\"></section></section>');\rcontainer = target.parent().parent();\r}\rself.initContainer(contentArea, container);\r\n};\r\n","import TOOLBAR_TYPE from \"../constants/toolbarType\";\r\nimport log from '../utils/log';\rexport default function (contentArea, container) {\rlet self = this;\rlet options = self.options;\rlet isNested = options.nestedContainerEnabled && container.closest('[data-type=\"container-content\"]').length > 0;\rlog(`initContainer - isNested=${isNested}`, contentArea, container);\rif (!container.hasClass('keditor-initialized-container') || !container.hasClass('keditor-initializing-container')) {\rcontainer.addClass('keditor-initializing-container');\rif (typeof options.onBeforeInitContainer === 'function') {\roptions.onBeforeInitContainer.call(self, container, contentArea);\r}\rif (isNested) {\rcontainer.addClass('keditor-sub-container');\r}\rlog('Render KEditor toolbar for container', container);\rcontainer.append(self.generateToolbar(isNested ? TOOLBAR_TYPE.SUB_CONTAINER : TOOLBAR_TYPE.CONTAINER));\rcontainer.attr('id', self.generateId(isNested ? 'sub-container' : 'container'));\rlet containerContents = container.find('[data-type=\"container-content\"]');\rlog(`Initialize ${containerContents.length} container content(s)`);\rcontainerContents.each(function () {\rlet containerContent = $(this);\rif (options.nestedContainerEnabled && !isNested && containerContent.parents('[data-type=\"container-content\"]').length > 0) {\r// Do nothing because it's container content of sub container\rreturn;\r}\rself.initContainerContent(contentArea, container, containerContent, isNested);\r});\rif (typeof options.onInitContainer === 'function') {\roptions.onInitContainer.call(self, container, contentArea);\r}\rcontainer.addClass('keditor-initialized-container');\rcontainer.removeClass('keditor-initializing-container');\r} else {\rif (container.hasClass('keditor-initialized-container')) {\rlog('Container is already initialized!');\r} else {\rlog('Container is initializing...');\r}\r}\r\n};\r\n","import TOOLBAR_TYPE from \"../constants/toolbarType\";\r\nimport SNIPPET_TYPE from \"../constants/snippetType\";\r\nimport log from '../utils/log';\rexport default function (contentArea, container, containerContent, isNested) {\rlog(`initContainerContent - isNested=${isNested}`, contentArea, container, containerContent);\rlet self = this;\rlet options = self.options;\rcontainerContent.addClass('keditor-container-content');\rif (isNested) {\rcontainerContent.addClass('keditor-sub-container-content');\r}\rcontainerContent.attr('id', self.generateId('container-content'));\rlet containerContentInner = $('<div class=\"keditor-container-content-inner\"></div>');\rcontainerContentInner.html(containerContent.html());\rcontainerContent.html(containerContentInner);\rlog('Initialize toolbar for container content');\rlet containerContentToolbar = $(self.generateToolbar(isNested ? TOOLBAR_TYPE.SUB_CONTAINER_CONTENT : TOOLBAR_TYPE.CONTAINER_CONTENT));\rcontainerContentToolbar.appendTo(containerContent);\rif (options.explicitSnippetEnabled) {\rif (!isNested) {\rif (options.explicitSnippetEnabled) {\rcontainerContentToolbar.children('.btn-add-container').on('click', function (e) {\re.preventDefault();\rself.openModal(containerContentInner, SNIPPET_TYPE.CONTAINER);\r});\r}\r}\rcontainerContentToolbar.children('.btn-add-component').on('click', function (e) {\re.preventDefault();\rself.openModal(containerContentInner, SNIPPET_TYPE.COMPONENT);\r});\r} else {\rcontainerContentToolbar.children('.btn-add-content').on('click', function (e) {\re.preventDefault();\rself.openModal(containerContentInner, isNested ? SNIPPET_TYPE.COMPONENT : options.nestedContainerEnabled ? SNIPPET_TYPE.ALL : SNIPPET_TYPE.COMPONENT);\r});\r}\rlog('Initialize $.fn.sortable for container content');\rcontainerContentInner.sortable({\rhandle: '.btn-component-reposition, .btn-container-reposition',\rhelper: 'clone',\ritems: '> section',\rconnectWith: '.keditor-container-content-inner',\rtolerance: 'pointer',\rsort: function () {\r$(this).removeClass('ui-state-default');\r},\rreceive: function (event, ui) {\rlog('On received snippet', event, ui);\rlet helper = ui.helper;\rlet item = ui.item;\rlet container;\rif (helper) {\rhelper.remove();\r}\rcontainer = item.closest('.keditor-container');\rif (!container.hasClass('showed-keditor-toolbar')) {\r$('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\rcontainer.addClass('showed-keditor-toolbar');\r}\rif (typeof options.onContainerChanged === 'function') {\roptions.onContainerChanged.call(self, event, container, contentArea);\r}\rif (typeof options.onContentChanged === 'function') {\roptions.onContentChanged.call(self, event, contentArea);\r}\ritem.removeClass('keditor-ui-dragging');\r},\rstart: function (e, ui) {\rui.item.addClass('keditor-ui-dragging');\r},\rstop: function (e, ui) {\rif (ui.helper) {\rui.helper.remove();\r}\rui.item.removeClass('keditor-ui-dragging');\r}\r});\rlog('Initialize existing components inside container content');\rcontainerContentInner.children().each(function () {\rlet child = $(this);\rif (child.find('[data-type=\"container-content\"]').length > 0) {\rself.convertToContainer(contentArea, child);\r} else {\rself.convertToComponent(contentArea, container, child, true);\r}\r});\r\n};\r\n","import log from '../utils/log';\rexport default function (contentArea, container, target, isExisting) {\rlog('convertToComponent', contentArea, container, target, isExisting);\rif (target.is('.keditor-container-content-toolbar')) {\rreturn;\r}\rlet self = this;\rlet isSection = target.is('section');\rlet component;\rif (isSection) {\rtarget.addClass('keditor-ui keditor-component');\rtarget.wrapInner('<section class=\"keditor-ui keditor-component-content\"></section>');\rcomponent = target;\r} else {\rtarget.wrap('<section class=\"keditor-ui keditor-component\"><section class=\"keditor-ui keditor-component-content\"></section></section>');\rcomponent = target.parent().parent();\r}\rif (isExisting) {\rcomponent.addClass('existing-component');\r}\rself.initComponent(contentArea, container, component);\r\n};\r\n","import log from '../utils/log';\rexport default function (dynamicElement) {\rlog('initDynamicContent', dynamicElement);\rlet self = this;\rlet options = self.options;\rlet component = dynamicElement.closest('.keditor-component');\rlet contentArea = dynamicElement.closest('.keditor-content-area');\rdynamicElement.attr('id', self.generateId('dynamic-element'));\rif (typeof options.onBeforeDynamicContentLoad === 'function') {\roptions.onBeforeDynamicContentLoad.call(self, dynamicElement, component, contentArea);\r}\rlet dynamicHref = dynamicElement.attr('data-dynamic-href');\rlet data = self.getDataAttributes(component, ['data-type', 'data-dynamic-href'], false);\rdata = $.param(data);\rlog(`Dynamic href: ${dynamicHref}, Data: ${data}`);\rreturn $.ajax({\rurl: dynamicHref,\rdata: data,\rtype: 'GET',\rdataType: 'HTML',\rsuccess: function (response, status, jqXHR) {\rlog('Dynamic content is loaded', dynamicElement, response, status, jqXHR);\rdynamicElement.html(response);\rif (typeof options.onDynamicContentLoaded === 'function') {\roptions.onDynamicContentLoaded.call(self, dynamicElement, jqXHR, contentArea);\r}\r},\rerror: function (jqXHR, textStatus, errorThrown ) {\rlog('Error when loading dynamic content', dynamicElement, jqXHR, textStatus, errorThrown );\rif (typeof options.onDynamicContentError === 'function') {\roptions.onDynamicContentError.call(self, dynamicElement, jqXHR, contentArea);\r}\r}\r});\r\n};\r\n","import log from '../utils/log';\rexport default function (container, isNested) {\rlog(`getContainerContent - isNested=${isNested}`, container);\rlet self = this;\rlet containerInner = container.children('.keditor-container-inner').clone();\rcontainerInner.find('[data-type=container-content]').not(isNested ? '' : '.keditor-sub-container-content').each(function () {\rlet containerContent = $(this);\rcontainerContent.removeClass('keditor-container-content keditor-sub-container-content ui-sortable').removeAttr('id');\rlet containerContentInner = containerContent.children();\rlet content = '';\rcontainerContentInner.children().each(function () {\rlet child = $(this);\rif (child.is('.keditor-component')) {\rcontent += self.getComponentContent(child);\r} else if (child.is('.keditor-sub-container')) {\rcontent += self.getContainerContent(child, true);\r}\r});\rcontainerContent.html(content);\r});\rreturn `<section>${containerInner.html()}</section>`;\r\n}","export default function (inArray) {\rlet self = this;\rlet result = [];\rself.contentAreasWrapper.find('.keditor-content-area-inner').each(function () {\rlet html = '';\r$(this).children('.keditor-container').each(function () {\rlet container = $(this);\rhtml += self.getContainerContent(container);\r});\rresult.push(html);\r});\rreturn inArray ? result : result.join('\\n');\r\n};\r\n","import error from \"./utils/error\";\rexport default function (content, contentArea) {\rlet self = this;\rlet contentAreasWrapper = self.contentAreasWrapper;\rif (!contentArea) {\rcontentArea = contentAreasWrapper.children('.keditor-content-area');\r} else {\rif (!contentArea.jquery) {\rcontentArea = contentAreasWrapper.find(contentArea);\r}\r}\rif (contentArea.length === 0) {\rerror('Content area does not exist!');\r}\rcontentArea.html(content);\rself.initContentArea(contentArea, true);\r\n};\r\n"],"sourceRoot":""}