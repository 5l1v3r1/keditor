{"version":3,"sources":["keditor.js"],"names":["_generateId","_interopRequireDefault","require","_log","obj","__esModule","default","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","window","$","flog","KEditor","debug","apply","arguments","error","message","Error","concat","fn","sortable","DEFAULTS","nestedContainerEnabled","explicitSnippetEnabled","containerForQuickAddComponent","btnAddContentText","btnAddContainerText","btnAddSubContainerText","btnAddComponentText","btnMoveContainerText","btnMoveComponentText","btnSettingContainerText","btnSettingComponentText","btnDuplicateContainerText","btnDuplicateComponentText","btnDeleteContainerText","btnDeleteComponentText","confirmDeleteContainerText","confirmDeleteComponentText","defaultComponentType","snippetsUrl","snippetsFilterEnabled","snippetsCategoriesSeparator","iframeMode","contentStyles","contentAreasSelector","contentAreasWrapper","containerSettingEnabled","containerSettingInitFunction","containerSettingShowFunction","containerSettingHideFunction","onReady","onSnippetsLoaded","modal","onSnippetsError","onInitIframe","iframe","iframeHead","iframeBody","onContentChanged","event","contentArea","onBeforeInitContentArea","onInitContentArea","onBeforeInitContainer","container","onInitContainer","onBeforeContainerDeleted","selectedContainer","onContainerDeleted","onContainerChanged","changedContainer","onContainerDuplicated","originalContainer","newContainer","onContainerSelected","onContainerSnippetAdded","selectedSnippet","onComponentReady","component","onBeforeInitComponent","onInitComponent","onBeforeComponentDeleted","selectedComponent","onComponentDeleted","onComponentChanged","changedComponent","onComponentDuplicated","originalComponent","newComponent","onComponentSelected","onComponentSnippetAdded","onBeforeDynamicContentLoad","dynamicElement","onDynamicContentLoaded","response","status","xhr","onDynamicContentError","TOOLBAR_TYPE","SNIPPET_TYPE","config","this","self","element","options","extend","initIframe","body","document","originalContent","val","html","generateContentAreasWrapper","is","after","addClass","empty","append","initSidebar","initSnippetsModal","initContentAreas","hasClass","initKEditorClicks","id","generateId","instances","value","type","undefined","timestamp","Date","getTime","random","Math","round","content","attr","isComponentConfigurable","settingBtn","categories","newArray","category","inArray","push","sort","settingContainer","settingComponent","ignoreAttributes","dataAttributes","each","get","attributes","name","indexOf","componentType","replace","components","selector","closest","wrapper","iframeWrapper","iframeDoc","contents","open","close","contentWindow","contentDocument","defaultView","find","styles","style","href","idStr","on","e","sidebar","getClickedElement","removeClass","parent","_contentArea","preventDefault","btn","closeSidebar","openSidebar","getContainerContent","convertToContainer","confirm","deleteComponent","remove","getComponentContent","convertToComponent","sidebarId","sidebarBody","form","appendTo","sidebarTitle","children","setSettingComponent","setSettingContainer","getComponentType","componentData","settingTitle","settingForm","_componentData","initSettingForm","loadingText","initFunction","when","done","setTimeout","showSettingForm","_settingForm","activeForm","activeType","hideSettingForm","modalId","snippetsWrapperHtml","ajax","dataType","url","success","resp","renderSnippets","initSnippetsFilter","jqXHR","closeModal","modalTarget","snippetType","snippetContentElement","snippetContent","isAddingContainer","isAddingComponent","isAddingComponentWithContainer","modalSnippetType","initContainer","getDataAttributes","join","initComponent","_dataAttributes","eq","snippet","css","snippetsContainerHtml","snippetsComponentHtml","snippetsContentHtml","snippetsCategories","snippetsContainerCategories","snippetsComponentCategories","filter","snippetId","trim","previewUrl","title","snippetHtml","split","beautifyCategories","snippetsWrapperSelector","categoriesOptions","snippetsWrapper","snippets","prepend","filterCategories","toLowerCase","data","timer","txtSearch","cbbFilter","doFilter","selectedCategory","searchText","dataCategories","dataCategoriesString","clearTimeout","modalTitle","modalAction","contentAreas","initContentArea","dontInitToolbar","contentAreaInner","contentAreaToolbar","generateToolbar","openModal","handle","items","helper","connectWith","axis","tolerance","receive","ui","item","start","stop","contentData","wrapInner","wrap","isNested","containerContents","containerContent","parents","initContainerContent","containerContentInner","containerContentToolbar","child","isExisting","settingEnabled","initDynamicContent","init","dynamicHref","param","destroy","cover","clonedComponent","clone","unwrap","getContent","containerInner","not","removeAttr","result","jquery","keditor","slice","constructor","version","blank","log","jQuery"],"mappings":"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","file":"keditor.min.js","sourcesContent":["\"use strict\";\n\nvar _generateId = _interopRequireDefault(require(\"./utils/generateId\"));\n\nvar _log = _interopRequireDefault(require(\"./utils/log\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n(function (window, $) {\n  // Log function will print log message\n  var flog = function flog() {\n    if (KEditor.debug) {\n      _log.default.apply(void 0, arguments);\n    }\n  }; // Throw error message\n\n\n  var error = function error(message) {\n    throw new Error(\"[ KEditor ] \".concat(message));\n  }; // Check dependencies\n\n\n  if (!$.fn.sortable) {\n    error('$.fn.sortable does not exist. Please import $.fn.sortable into your document for continue using KEditor.');\n  }\n\n  var DEFAULTS = {\n    nestedContainerEnabled: true,\n    explicitSnippetEnabled: false,\n    containerForQuickAddComponent: \"\\n            <div class=\\\"row\\\">\\n                <div class=\\\"col-sm-12\\\" data-type=\\\"container-content\\\">\\n                </div>\\n            </div>\\n        \",\n    btnAddContentText: '<i class=\"fa fa-plus\"></i>',\n    btnAddContainerText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-columns\"></i>',\n    btnAddSubContainerText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-columns\"></i>',\n    btnAddComponentText: '<i class=\"fa fa-plus\"></i> <i class=\"fa fa-fw fa-list-ul\"></i>',\n    btnMoveContainerText: '<i class=\"fa fa-sort\"></i>',\n    btnMoveComponentText: '<i class=\"fa fa-arrows\"></i>',\n    btnSettingContainerText: '<i class=\"fa fa-cog\"></i>',\n    btnSettingComponentText: '<i class=\"fa fa-cog\"></i>',\n    btnDuplicateContainerText: '<i class=\"fa fa-files-o\"></i>',\n    btnDuplicateComponentText: '<i class=\"fa fa-files-o\"></i>',\n    btnDeleteContainerText: '<i class=\"fa fa-times\"></i>',\n    btnDeleteComponentText: '<i class=\"fa fa-times\"></i>',\n    confirmDeleteContainerText: 'Are you sure that you want to delete this container? This action can not be undone!',\n    confirmDeleteComponentText: 'Are you sure that you want to delete this component? This action can not be undone!',\n    defaultComponentType: 'blank',\n    snippetsUrl: 'snippets/snippets.html',\n    snippetsFilterEnabled: true,\n    snippetsCategoriesSeparator: ';',\n    iframeMode: false,\n    contentStyles: [],\n    contentAreasSelector: null,\n    contentAreasWrapper: '<div class=\"keditor-ui keditor-content-areas-wrapper\"></div>',\n    containerSettingEnabled: false,\n    containerSettingInitFunction: null,\n    containerSettingShowFunction: null,\n    containerSettingHideFunction: null,\n    onReady: function onReady() {},\n    onSnippetsLoaded: function onSnippetsLoaded(modal) {},\n    onSnippetsError: function onSnippetsError(modal, error) {},\n    onInitIframe: function onInitIframe(iframe, iframeHead, iframeBody) {},\n    onContentChanged: function onContentChanged(event, contentArea) {},\n    onBeforeInitContentArea: function onBeforeInitContentArea(contentArea) {},\n    onInitContentArea: function onInitContentArea(contentArea) {},\n    onBeforeInitContainer: function onBeforeInitContainer(container, contentArea) {},\n    onInitContainer: function onInitContainer(container, contentArea) {},\n    onBeforeContainerDeleted: function onBeforeContainerDeleted(event, selectedContainer, contentArea) {},\n    onContainerDeleted: function onContainerDeleted(event, selectedContainer, contentArea) {},\n    onContainerChanged: function onContainerChanged(event, changedContainer, contentArea) {},\n    onContainerDuplicated: function onContainerDuplicated(event, originalContainer, newContainer, contentArea) {},\n    onContainerSelected: function onContainerSelected(event, selectedContainer, contentArea) {},\n    onContainerSnippetAdded: function onContainerSnippetAdded(event, newContainer, selectedSnippet, contentArea) {},\n    onComponentReady: function onComponentReady(component) {},\n    onBeforeInitComponent: function onBeforeInitComponent(component, contentArea) {},\n    onInitComponent: function onInitComponent(component, contentArea) {},\n    onBeforeComponentDeleted: function onBeforeComponentDeleted(event, selectedComponent, contentArea) {},\n    onComponentDeleted: function onComponentDeleted(event, selectedComponent, contentArea) {},\n    onComponentChanged: function onComponentChanged(event, changedComponent, contentArea) {},\n    onComponentDuplicated: function onComponentDuplicated(event, originalComponent, newComponent, contentArea) {},\n    onComponentSelected: function onComponentSelected(event, selectedComponent, contentArea) {},\n    onComponentSnippetAdded: function onComponentSnippetAdded(event, newComponent, selectedSnippet, contentArea) {},\n    onBeforeDynamicContentLoad: function onBeforeDynamicContentLoad(dynamicElement, component, contentArea) {},\n    onDynamicContentLoaded: function onDynamicContentLoaded(dynamicElement, response, status, xhr, contentArea) {},\n    onDynamicContentError: function onDynamicContentError(dynamicElement, response, status, xhr, contentArea) {}\n  };\n  var TOOLBAR_TYPE = {\n    CONTENT_AREA: 0,\n    CONTAINER: 1,\n    SUB_CONTAINER: 2,\n    CONTAINER_CONTENT: 3,\n    SUB_CONTAINER_CONTENT: 4,\n    COMPONENT: 5\n  };\n  var SNIPPET_TYPE = {\n    ALL: 0,\n    CONTAINER: 1,\n    COMPONENT: 2\n  }; // KEditor class\n\n  var KEditor =\n  /*#__PURE__*/\n  function () {\n    function KEditor(target, config) {\n      _classCallCheck(this, KEditor);\n\n      var self = this;\n      var element = self.element = target;\n      var options = self.options = $.extend({}, DEFAULTS, config);\n\n      if (options.iframeMode) {\n        self.initIframe();\n      } else {\n        self.window = window;\n        self.body = $(document.body);\n        var originalContent = element.val() || element.html() || '';\n        var contentAreasWrapper = self.generateContentAreasWrapper(originalContent);\n\n        if (element.is('textarea')) {\n          element.after(contentAreasWrapper);\n          element.addClass('keditor-hidden-element');\n        } else {\n          element.empty().append(contentAreasWrapper);\n        }\n\n        self.contentAreasWrapper = contentAreasWrapper;\n      }\n\n      self.initSidebar();\n      self.initSnippetsModal();\n      self.initContentAreas();\n\n      if (!self.body.hasClass('keditor-clicks-initialized')) {\n        self.initKEditorClicks();\n      }\n\n      self.id = self.generateId();\n      KEditor.instances[self.id] = self;\n\n      if (typeof options.onReady === 'function') {\n        options.onReady.call(self);\n      }\n    } // Utils\n    //---------------------------------\n\n\n    _createClass(KEditor, [{\n      key: \"generateId\",\n      value: function generateId() {\n        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var timestamp = new Date().getTime();\n        var random = Math.round(Math.random() * 9876543210);\n        return \"keditor-\".concat(type, \"-\").concat(timestamp).concat(random);\n      }\n    }, {\n      key: \"generateContentAreasWrapper\",\n      value: function generateContentAreasWrapper(content) {\n        var self = this;\n        var options = self.options;\n        var contentAreasWrapper = $(options.contentAreasWrapper || '<div />');\n        contentAreasWrapper.attr('class', 'keditor-ui keditor-content-area-wrapper');\n\n        if (!contentAreasWrapper.attr('id')) {\n          contentAreasWrapper.attr('id', self.generateId('content-area-wrapper'));\n        }\n\n        contentAreasWrapper.html(content);\n        return contentAreasWrapper;\n      }\n    }, {\n      key: \"generateToolbar\",\n      value: function generateToolbar(type, isComponentConfigurable) {\n        var self = this;\n        var options = self.options;\n        var settingBtn = '';\n\n        if (!options.explicitSnippetEnabled) {\n          var toolbarClass = '';\n\n          switch (type) {\n            case TOOLBAR_TYPE.CONTENT_AREA:\n              toolbarClass = 'keditor-content-area-toolbar';\n\n            case TOOLBAR_TYPE.CONTAINER_CONTENT:\n            case TOOLBAR_TYPE.SUB_CONTAINER_CONTENT:\n              toolbarClass = 'keditor-container-content-toolbar';\n              return \"\\n                            <div class=\\\"keditor-ui \".concat(toolbarClass, \"\\\">\\n                                <a href=\\\"javascript:void(0)\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default btn-add-content\\\" title=\\\"Add content\\\">\").concat(options.btnAddContentText, \"</a>\\n                            </div>\\n                        \");\n\n            default: // Do nothing\n\n          }\n        }\n\n        switch (type) {\n          case TOOLBAR_TYPE.CONTENT_AREA:\n            return \"\\n                        <div class=\\\"keditor-ui keditor-content-area-toolbar\\\">\\n                            <a href=\\\"javascript:void(0)\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default btn-add-container\\\" title=\\\"Add container\\\">\".concat(options.btnAddContainerText, \"</a>\\n                        </div>\\n                    \");\n\n          case TOOLBAR_TYPE.CONTAINER:\n            if (options.containerSettingEnabled === true) {\n              settingBtn = \"<a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-setting\\\">\".concat(options.btnSettingContainerText, \"</a>\");\n            }\n\n            return \"\\n                        <div class=\\\"keditor-toolbar keditor-toolbar-container\\\">\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-reposition\\\">\".concat(options.btnMoveContainerText, \"</a>\\n                            \").concat(settingBtn, \"\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-duplicate\\\">\").concat(options.btnDuplicateContainerText, \"</a>\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-delete\\\">\").concat(options.btnDeleteContainerText, \"</a>\\n                        </div>\\n                    \");\n\n          case TOOLBAR_TYPE.SUB_CONTAINER:\n            if (options.containerSettingEnabled === true) {\n              settingBtn = \"<a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-setting\\\">\".concat(options.btnSettingContainerText, \"</a>\");\n            }\n\n            return \"\\n                        <div class=\\\"keditor-toolbar keditor-toolbar-container keditor-toolbar-sub-container\\\">\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-reposition\\\">\".concat(options.btnMoveContainerText, \"</a>\\n                            \").concat(settingBtn, \"\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-duplicate\\\">\").concat(options.btnDuplicateContainerText, \"</a>\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-container-delete\\\">\").concat(options.btnDeleteContainerText, \"</a>\\n                        </div>\\n                    \");\n\n          case TOOLBAR_TYPE.CONTAINER_CONTENT:\n            return \"\\n                        <div class=\\\"keditor-ui keditor-container-content-toolbar keditor-btn-group\\\">\\n                            <a href=\\\"javascript:void(0)\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default btn-add-container\\\" title=\\\"Add sub-container\\\">\".concat(options.btnAddSubContainerText, \"</a>\\n                            <a href=\\\"javascript:void(0)\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default btn-add-component\\\" title=\\\"Add component\\\">\").concat(options.btnAddComponentText, \"</a>\\n                        </div>\\n                    \");\n\n          case TOOLBAR_TYPE.SUB_CONTAINER_CONTENT:\n            return \"\\n                        <div class=\\\"keditor-ui keditor-container-content-toolbar\\\">\\n                            <a href=\\\"javascript:void(0)\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default btn-add-component\\\" title=\\\"Add component\\\">\".concat(options.btnAddComponentText, \"</a>\\n                        </div>\\n                    \");\n\n          case TOOLBAR_TYPE.COMPONENT:\n            if (isComponentConfigurable) {\n              settingBtn = \"<a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-component-setting\\\">\".concat(options.btnSettingComponentText, \"</a>\");\n            }\n\n            return \"\\n                        <div class=\\\"keditor-toolbar keditor-toolbar-component\\\">\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-component-reposition\\\">\".concat(options.btnMoveComponentText, \"</a>\\n                            \").concat(settingBtn, \"\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-component-duplicate\\\">\").concat(options.btnDuplicateComponentText, \"</a>\\n                            <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui btn-component-delete\\\">\").concat(options.btnDeleteComponentText, \"</a>\\n                        </div>\\n                    \");\n\n          default: // Do nothing\n\n        }\n      }\n    }, {\n      key: \"beautifyCategories\",\n      value: function beautifyCategories(categories) {\n        var newArray = [];\n\n        for (var i = 0; i < categories.length; i++) {\n          var category = categories[i] || '';\n\n          if (category !== '' && $.inArray(category, newArray) === -1) {\n            newArray.push(category);\n          }\n        }\n\n        return newArray.sort();\n      }\n    }, {\n      key: \"setSettingContainer\",\n      value: function setSettingContainer(container) {\n        this.settingContainer = container;\n      }\n    }, {\n      key: \"getSettingContainer\",\n      value: function getSettingContainer() {\n        return this.settingContainer;\n      }\n    }, {\n      key: \"setSettingComponent\",\n      value: function setSettingComponent(component) {\n        this.settingComponent = component;\n      }\n    }, {\n      key: \"getSettingComponent\",\n      value: function getSettingComponent() {\n        return this.settingComponent;\n      }\n    }, {\n      key: \"getDataAttributes\",\n      value: function getDataAttributes(target, ignoreAttributes, isArray) {\n        var dataAttributes = isArray ? [] : {};\n\n        if (!ignoreAttributes) {\n          ignoreAttributes = [];\n        }\n\n        $.each(target.get(0).attributes, function (i, attr) {\n          if (attr.name.indexOf('data-') === 0 && $.inArray(attr.name, ignoreAttributes) === -1) {\n            if (isArray) {\n              dataAttributes.push(\"\".concat(attr.name, \"=\\\"\").concat(attr.value, \"\\\"\"));\n            } else {\n              dataAttributes[attr.name] = attr.value;\n            }\n          }\n        });\n        return dataAttributes;\n      }\n    }, {\n      key: \"getComponentType\",\n      value: function getComponentType(component) {\n        var self = this;\n        var options = self.options;\n        var componentType = (component.attr('data-type') || '').replace('component-', '');\n\n        if (componentType && componentType in KEditor.components) {\n          return componentType;\n        } else {\n          if (typeof options.defaultComponentType === 'string') {\n            componentType = options.defaultComponentType;\n          } else if (typeof options.defaultComponentType === 'function') {\n            componentType = options.defaultComponentType.call(self, component);\n          }\n\n          if (!componentType) {\n            error('Component type is undefined!');\n          }\n\n          flog(\"Fallback to defaultComponentType: \".concat(componentType));\n          return componentType;\n        }\n      }\n    }, {\n      key: \"getClickedElement\",\n      value: function getClickedElement(event, selector) {\n        var target = $(event.target);\n        var closest = target.closest(selector);\n\n        if (target.is(selector)) {\n          return target;\n        } else if (closest.length > 0) {\n          return closest;\n        } else {\n          return null;\n        }\n      } // Iframe\n      //---------------------------------\n\n    }, {\n      key: \"initIframe\",\n      value: function initIframe() {\n        flog('initIframe');\n        var self = this;\n        var options = self.options;\n        var element = self.element;\n        var originalContent = element.is('textarea') ? element.val() : element.html();\n        var wrapper = self.iframeWrapper = $('<div class=\"keditor-ui keditor-iframe-wrapper\"></div>');\n        var iframe = self.iframe = $('<iframe class=\"keditor-ui keditor-iframe\"></iframe>');\n        element.after(wrapper);\n        wrapper.attr('id', self.generateId('iframe-wrapper')).append(iframe);\n        element.addClass('keditor-hidden-element');\n        var iframeDoc = self.iframeDoc = iframe.contents(); // Fix issue Firefox can't render content inside iframe\n        // ======================================================\n\n        iframeDoc.get(0).open();\n        iframeDoc.get(0).close(); // ======================================================\n\n        self.window = iframe[0].contentWindow ? iframe[0].contentWindow : iframe[0].contentDocument.defaultView;\n        var iframeHead = self.iframeHead = iframeDoc.find('head');\n        var iframeBody = self.iframeBody = self.body = iframeDoc.find('body');\n        flog('Adding styles to iframe...');\n        var styles = '';\n        $('[data-type=\"keditor-style\"]').each(function () {\n          var style = $(this);\n          var href = style.attr('href') || style.attr('data-href') || '';\n\n          if (href) {\n            styles += \"<link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\".concat(href, \"\\\" />\\n\");\n          } else {\n            styles += \"<style type=\\\"text/css\\\">\".concat(style.html(), \"</style>\\n\");\n          }\n        });\n\n        if (options.contentStyles && $.isArray(options.contentStyles)) {\n          $.each(options.contentStyles, function (i, style) {\n            var idStr = '';\n\n            if (style.id) {\n              idStr = \" id=\\\"\".concat(style.id, \"\\\" \");\n            }\n\n            if (style.href) {\n              styles += \"<link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\".concat(style.href, \"\\\" \").concat(idStr, \" />\\n\");\n            } else {\n              styles += \"<style type=\\\"text/css\\\" \".concat(idStr, \">\").concat(style.content, \"</style>\\n\");\n            }\n          });\n        }\n\n        iframeHead.append(styles);\n        flog('Adding original content to iframe...');\n        var contentAreasWrapper = self.generateContentAreasWrapper(originalContent);\n        iframeBody.append(contentAreasWrapper);\n        self.contentAreasWrapper = contentAreasWrapper;\n\n        if (typeof options.onInitIframe === 'function') {\n          options.onInitIframe.call(self, iframe, iframeHead, iframeBody);\n        }\n      } // KEditor clicks\n      //---------------------------------\n\n    }, {\n      key: \"initKEditorClicks\",\n      value: function initKEditorClicks() {\n        flog('initKEditorClicks');\n        var self = this;\n        var options = self.options;\n        var body = self.body;\n        body.on('click', function (e) {\n          var sidebar = self.getClickedElement(e, '.keditor-sidebar');\n          var modal = self.getClickedElement(e, '.keditor-modal');\n          var container = self.getClickedElement(e, '.keditor-container');\n\n          if (container) {\n            if (!container.hasClass('showed-keditor-toolbar')) {\n              body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              body.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              container.addClass('showed-keditor-toolbar');\n              var contentArea = container.parent();\n\n              if (typeof options.onContainerSelected === 'function') {\n                options.onContainerSelected.call(self, e, container, contentArea);\n              }\n            }\n          } else {\n            if (!sidebar && !modal) {\n              body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              body.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n            }\n          }\n\n          var component = self.getClickedElement(e, '.keditor-component');\n\n          if (component) {\n            if (!component.hasClass('showed-keditor-toolbar')) {\n              body.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              component.addClass('showed-keditor-toolbar');\n\n              var _contentArea = component.parent();\n\n              if (typeof options.onComponentSelected === 'function') {\n                options.onComponentSelected.call(self, e, component, _contentArea);\n              }\n            }\n          } else {\n            if (!sidebar) {\n              body.find('.keditor-component.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n            }\n          }\n        });\n        body.on('click', '.btn-container-setting', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-container-setting', btn);\n          var container = btn.closest('.keditor-container');\n\n          if (body.hasClass('opened-keditor-setting') && body.hasClass('opened-keditor-sidebar')) {\n            if (!container.is(self.settingContainer)) {\n              self.openSidebar(container);\n            } else {\n              self.closeSidebar();\n            }\n          } else {\n            self.openSidebar(container);\n          }\n        });\n        body.on('click', '.btn-container-duplicate', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-container-duplicate', btn);\n          var container = btn.closest('.keditor-container');\n          var contentArea = container.parent();\n          var newContainer = $(self.getContainerContent(container, btn.parent().hasClass('keditor-toolbar-sub-container')));\n          container.after(newContainer);\n          self.convertToContainer(contentArea, newContainer);\n          flog('Container is duplicated');\n\n          if (typeof options.onContainerDuplicated === 'function') {\n            options.onContainerDuplicated.call(self, container, newContainer, contentArea);\n          }\n\n          if (typeof options.onContentChanged === 'function') {\n            options.onContentChanged.call(self, e, contentArea);\n          }\n        });\n        body.on('click', '.btn-container-delete', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-container-delete', btn);\n\n          if (confirm(options.confirmDeleteContainerText)) {\n            var container = btn.closest('.keditor-container');\n            var components = container.find('.keditor-component');\n            var contentArea = container.parent();\n\n            if (typeof options.onBeforeContainerDeleted === 'function') {\n              options.onBeforeContainerDeleted.call(self, e, container, contentArea);\n            }\n\n            var settingComponent = self.settingComponent;\n\n            if (settingComponent) {\n              var settingComponentParent = settingComponent.closest('.keditor-container');\n\n              if (settingComponentParent.is(container)) {\n                flog('Deleting container is container of setting container. Close setting panel for this setting component', settingComponent);\n                self.closeSidebar();\n              }\n            } else if (container.is(self.settingContainer)) {\n              flog('Deleting container is setting container. Close setting panel for this container', container);\n              self.closeSidebar();\n            }\n\n            if (components.length > 0) {\n              components.each(function () {\n                self.deleteComponent($(this));\n              });\n            }\n\n            container.remove();\n\n            if (typeof options.onContainerDeleted === 'function') {\n              options.onContainerDeleted.call(self, e, container, contentArea);\n            }\n\n            if (typeof options.onContentChanged === 'function') {\n              options.onContentChanged.call(self, e, contentArea);\n            }\n          }\n        });\n        body.on('click', '.btn-component-setting', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-component-setting', btn);\n          var component = btn.closest('.keditor-component');\n\n          if (body.hasClass('opened-keditor-setting') && body.hasClass('opened-keditor-sidebar')) {\n            if (!component.is(self.settingComponent())) {\n              self.openSidebar(component);\n            } else {\n              self.closeSidebar();\n            }\n          } else {\n            self.openSidebar(component);\n          }\n        });\n        body.on('click', '.btn-component-duplicate', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-component-duplicate', btn);\n          var component = btn.closest('.keditor-component');\n          var container = component.closest('.keditor-container');\n          var contentArea = container.parent();\n          var newComponent = $(self.getComponentContent(component));\n          component.after(newComponent);\n          self.convertToComponent(contentArea, container, newComponent);\n          flog('Component is duplicated');\n\n          if (typeof options.onComponentDuplicated === 'function') {\n            options.onComponentDuplicated.call(self, component, newComponent, contentArea);\n          }\n\n          if (typeof options.onContainerChanged === 'function') {\n            options.onContainerChanged.call(self, e, container, contentArea);\n          }\n\n          if (typeof options.onContentChanged === 'function') {\n            options.onContentChanged.call(self, e, contentArea);\n          }\n        });\n        body.on('click', '.btn-component-delete', function (e) {\n          e.preventDefault();\n          var btn = $(this);\n          flog('Click on .btn-component-delete', btn);\n\n          if (confirm(options.confirmDeleteComponentText)) {\n            var component = btn.closest('.keditor-component');\n            var container = component.closest('.keditor-container');\n            var contentArea = component.closest('.keditor-content-area');\n\n            if (typeof options.onBeforeComponentDeleted === 'function') {\n              options.onBeforeComponentDeleted.call(self, e, component, contentArea);\n            }\n\n            if (component.is(self.settingComponent)) {\n              self.closeSidebar();\n            }\n\n            self.deleteComponent(component);\n\n            if (typeof options.onComponentDeleted === 'function') {\n              options.onComponentDeleted.call(self, e, component, contentArea);\n            }\n\n            if (typeof options.onContainerChanged === 'function') {\n              options.onContainerChanged.call(self, e, container, contentArea);\n            }\n\n            if (typeof options.onContentChanged === 'function') {\n              options.onContentChanged.call(self, e, contentArea);\n            }\n          }\n        });\n        body.addClass('keditor-clicks-initialized');\n      } // Sidebar\n      //---------------------------------\n\n    }, {\n      key: \"initSidebar\",\n      value: function initSidebar() {\n        var self = this;\n        var options = self.options;\n        var sidebarId = self.generateId('sidebar');\n        var sidebar = self.sidebar = $(\"\\n                <div class=\\\"keditor-ui keditor-sidebar\\\" id=\\\"\".concat(sidebarId, \"\\\">                    \\n                    <div class=\\\"keditor-ui keditor-sidebar-header\\\">\\n                        <span class=\\\"keditor-ui keditor-sidebar-title\\\"></span>\\n                        <a href=\\\"javascript:void(0);\\\" class=\\\"keditor-ui keditor-sidebar-close\\\">&times;</a>\\n                    </div>\\n                    <div class=\\\"keditor-ui keditor-sidebar-body\\\"></div>\\n                </div>\\n            \"));\n        sidebar.find('.keditor-sidebar-close').on('click', function (e) {\n          e.preventDefault();\n          self.closeSidebar();\n        });\n        var sidebarBody = sidebar.find('.keditor-sidebar-body');\n        sidebarBody.on('submit', 'form', function (e) {\n          e.preventDefault();\n          return false;\n        });\n\n        if (options.containerSettingEnabled === true) {\n          if (typeof options.containerSettingInitFunction === 'function') {\n            var form = $('<div  class=\"keditor-ui keditor-setting-form keditor-container-setting\"></div>');\n            sidebarBody.append(form);\n            flog('Initialize container setting panel');\n            options.containerSettingInitFunction.call(self, form, self);\n          } else {\n            error('\"containerSettingInitFunction\" is not function!');\n          }\n        }\n\n        sidebar.appendTo(options.iframeMode ? self.iframeWrapper : self.body);\n      }\n    }, {\n      key: \"openSidebar\",\n      value: function openSidebar(target) {\n        var self = this;\n        var options = self.options;\n        var sidebar = self.sidebar;\n        var sidebarTitle = sidebar.find('.keditor-sidebar-title');\n        var sidebarBody = sidebar.find('.keditor-sidebar-body');\n        var activeForm = sidebarBody.children('.active');\n        activeForm.removeClass('active');\n\n        if (target.is('.keditor-component')) {\n          self.setSettingComponent(target);\n          self.setSettingContainer(null);\n          var componentType = self.getComponentType(target);\n          var componentData = KEditor.components[componentType];\n          sidebarTitle.html(componentData.settingTitle);\n          var settingForm = sidebarBody.find(\".keditor-setting-\".concat(componentType));\n\n          if (settingForm.length === 0) {\n            var _componentData = KEditor.components[componentType];\n\n            if (typeof _componentData.initSettingForm === 'function') {\n              settingForm = $(\"\\n                            <div \\n                                data-type=\\\"\".concat(componentType, \"\\\" \\n                                class=\\\"keditor-ui keditor-setting-form keditor-setting-\").concat(componentType, \" clearfix active\\\"\\n                            >\\n                            </div>\\n                        \"));\n              var loadingText = $('<span />').html('Loading...');\n              sidebarBody.append(settingForm);\n              settingForm.append(loadingText);\n\n              var initFunction = _componentData.initSettingForm.call(_componentData, settingForm, self);\n\n              $.when(initFunction).done(function () {\n                flog(\"Initialized setting form for component type \\\"\".concat(componentType, \"\\\"\"));\n                setTimeout(function () {\n                  loadingText.remove();\n\n                  if (typeof _componentData.showSettingForm === 'function') {\n                    _componentData.showSettingForm.call(_componentData, settingForm, target, self);\n                  }\n                }, 100);\n              });\n            }\n          } else {\n            if (typeof componentData.showSettingForm === 'function') {\n              componentData.showSettingForm.call(componentData, settingForm, target, self);\n            }\n\n            settingForm.addClass('active');\n          }\n        } else {\n          self.setSettingContainer(target);\n          self.setSettingComponent(null);\n          sidebarTitle.html('Container Settings');\n\n          var _settingForm = sidebar.find('.keditor-container-setting');\n\n          if (typeof options.containerSettingShowFunction === 'function') {\n            options.containerSettingShowFunction.call(self, _settingForm, target, self);\n          }\n\n          _settingForm.addClass('active');\n        }\n\n        sidebar.addClass('opened');\n      }\n    }, {\n      key: \"closeSidebar\",\n      value: function closeSidebar() {\n        var self = this;\n        var options = self.options;\n        var sidebar = self.sidebar;\n        var activeForm = sidebar.find('.keditor-sidebar-body').children('.active');\n\n        if (activeForm.length > 0) {\n          if (activeForm.is('.keditor-container-setting')) {\n            if (typeof options.containerSettingHideFunction === 'function') {\n              options.containerSettingHideFunction.call(self, activeForm, self);\n            }\n          } else {\n            var activeType = activeForm.attr('data-type');\n            var componentData = KEditor.components[activeType];\n\n            if (typeof componentData.hideSettingForm === 'function') {\n              componentData.hideSettingForm.call(componentData, activeForm, self);\n            }\n          }\n\n          activeForm.removeClass('active');\n        }\n\n        self.setSettingComponent(null);\n        self.setSettingContainer(null);\n        sidebar.removeClass('opened');\n      } // Legacy methods. DEPRECATED\n      //---------------------------------\n\n    }, {\n      key: \"showSettingPanel\",\n      value: function showSettingPanel(target) {\n        this.openSidebar(target);\n      }\n    }, {\n      key: \"hideSettingPanel\",\n      value: function hideSettingPanel() {\n        this.closeSidebar();\n      } // Snippet modal\n      //---------------------------------\n\n    }, {\n      key: \"initSnippetsModal\",\n      value: function initSnippetsModal() {\n        var self = this;\n        var options = self.options;\n        var modalId = self.generateId('modal');\n        var snippetsWrapperHtml = '';\n\n        if (options.explicitSnippetEnabled) {\n          snippetsWrapperHtml = \"\\n                    <div class=\\\"keditor-snippets-wrapper keditor-snippets-wrapper-container\\\">\\n                        <div class=\\\"keditor-snippets keditor-snippets-container\\\"></div>\\n                    </div>\\n                    <div class=\\\"keditor-snippets-wrapper keditor-snippets-wrapper-component\\\">\\n                        <div class=\\\"keditor-snippets keditor-snippets-component\\\"></div>\\n                    </div>\\n                \";\n        } else {\n          snippetsWrapperHtml = \"\\n                    <div class=\\\"keditor-snippets-wrapper\\\">\\n                        <div class=\\\"keditor-snippets\\\"></div>\\n                    </div>\\n                \";\n        }\n\n        var modal = self.modal = $(\"\\n                <div class=\\\"keditor-ui keditor-modal\\\" id=\\\"\".concat(modalId, \"\\\">\\n                    <div class=\\\"keditor-modal-header\\\">\\n                        <button type=\\\"button\\\" class=\\\"keditor-modal-close\\\">&times;</button>\\n                        <h4 class=\\\"keditor-modal-title\\\"></h4>\\n                    </div>\\n                    <div class=\\\"keditor-modal-body\\\">\").concat(snippetsWrapperHtml, \"</div>\\n                    <div class=\\\"keditor-modal-footer\\\">\\n                        <button type=\\\"button\\\" class=\\\"keditor-ui keditor-btn keditor-btn-default keditor-modal-close\\\">Close</button>\\n                        <button type=\\\"button\\\" class=\\\"keditor-ui keditor-btn keditor-btn-primary keditor-modal-add\\\">Add</button>\\n                    </div>\\n                </div>\\n            \"));\n\n        if (typeof options.snippetsUrl === 'string' && options.snippetsUrl.length > 0) {\n          flog(\"Getting snippets form \\\"\".concat(options.snippetsUrl, \"\\\"...\"));\n          $.ajax({\n            type: 'get',\n            dataType: 'html',\n            url: options.snippetsUrl,\n            success: function success(resp) {\n              flog('Success in getting snippets');\n\n              if (typeof options.onSnippetsLoaded === 'function') {\n                resp = options.onSnippetsLoaded.call(self, resp) || resp;\n              }\n\n              self.renderSnippets(resp);\n\n              if (options.snippetsFilterEnabled) {\n                if (options.explicitSnippetEnabled) {\n                  self.initSnippetsFilter(SNIPPET_TYPE.CONTAINER);\n                  self.initSnippetsFilter(SNIPPET_TYPE.COMPONENT);\n                } else {\n                  self.initSnippetsFilter(SNIPPET_TYPE.ALL);\n                }\n              }\n            },\n            error: function error(jqXHR) {\n              flog('Error when getting snippets', jqXHR);\n\n              if (typeof options.onSnippetsError === 'function') {\n                options.onSnippetsError.call(self, jqXHR);\n              }\n            }\n          }); // Close buttons\n\n          modal.find('.keditor-modal-close').on('click', function (e) {\n            e.preventDefault();\n            self.closeModal();\n          }); // Add button\n\n          modal.find('.keditor-modal-add').on('click', function (e) {\n            e.preventDefault();\n            var selectedSnippet = modal.find('.keditor-snippets-wrapper .selected');\n\n            if (selectedSnippet.length === 0) {\n              return;\n            }\n\n            var contentArea = self.modalTarget.closest('.keditor-content-area');\n            var snippetType = selectedSnippet.attr('data-type');\n            var snippetContentElement = modal.find(selectedSnippet.attr('data-snippet'));\n            var snippetContent = snippetContentElement.html();\n            var isAddingContainer = false;\n            var isAddingComponent = false;\n            var isAddingComponentWithContainer = false;\n\n            if (options.explicitSnippetEnabled) {\n              switch (self.modalSnippetType) {\n                case SNIPPET_TYPE.COMPONENT:\n                  isAddingComponent = true;\n                  break;\n\n                case SNIPPET_TYPE.CONTAINER:\n                  isAddingContainer = true;\n                  break;\n\n                default: // Do nothing\n\n              }\n            } else {\n              if (snippetType === 'container') {\n                isAddingContainer = true;\n              } else {\n                switch (self.modalSnippetType) {\n                  case SNIPPET_TYPE.COMPONENT:\n                    isAddingComponent = true;\n                    break;\n\n                  case SNIPPET_TYPE.ALL:\n                    if (self.modalTarget.is('.keditor-container-content-inner')) {\n                      isAddingComponent = true;\n                    } else {\n                      isAddingComponentWithContainer = true;\n                    }\n\n                    break;\n\n                  default: // Do nothing\n\n                }\n              }\n            }\n\n            var newContainer;\n            var newComponent;\n\n            if (isAddingContainer) {\n              self.body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              newContainer = $(\"\\n                            <section class=\\\"keditor-ui keditor-container showed-keditor-toolbar\\\">\\n                                <section class=\\\"keditor-ui keditor-container-inner\\\">\".concat(snippetContent, \"</section>\\n                            </section>\\n                        \"));\n              self.modalTarget.append(newContainer);\n\n              if (typeof options.onContainerSnippetAdded === 'function') {\n                options.onContainerSnippetAdded.call(self, e, newContainer, selectedSnippet, contentArea);\n              }\n\n              if (typeof options.onContentChanged === 'function') {\n                options.onContentChanged.call(self, e, contentArea);\n              }\n\n              self.initContainer(contentArea, newContainer);\n            }\n\n            if (isAddingComponent) {\n              var dataAttributes = self.getDataAttributes(snippetContentElement, null, true);\n              newComponent = $(\"\\n                            <section class=\\\"keditor-ui keditor-component\\\" data-type=\\\"\".concat(snippetType, \"\\\" \").concat(dataAttributes.join(' '), \">\\n                                <section class=\\\"keditor-ui keditor-component-content\\\">\").concat(snippetContent, \"</section>\\n                            </section>\\n                        \"));\n              self.modalTarget.append(newComponent);\n              var container = self.modalTarget.closest('.keditor-container');\n\n              if (typeof options.onComponentSnippetAdded === 'function') {\n                options.onComponentSnippetAdded.call(self, e, newComponent, selectedSnippet, contentArea);\n              }\n\n              if (typeof options.onContentChanged === 'function') {\n                options.onContentChanged.call(self, e, contentArea);\n              }\n\n              self.initComponent(contentArea, container, newComponent);\n            }\n\n            if (isAddingComponentWithContainer) {\n              self.body.find('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n\n              var _dataAttributes = self.getDataAttributes(snippetContentElement, null, true);\n\n              newContainer = $(\"\\n                            <section class=\\\"keditor-ui keditor-container showed-keditor-toolbar\\\">\\n                                <section class=\\\"keditor-ui keditor-container-inner\\\">\".concat(options.containerForQuickAddComponent, \"</section>\\n                            </section>\\n                        \"));\n              newComponent = $(\"\\n                            <section class=\\\"keditor-ui keditor-component\\\" data-type=\\\"\".concat(snippetType, \"\\\" \").concat(_dataAttributes.join(' '), \">\\n                                <section class=\\\"keditor-ui keditor-component-content\\\">\").concat(snippetContent, \"</section>\\n                            </section>\\n                        \"));\n              newContainer.find('[data-type=\"container-content\"]').eq(0).html(newComponent);\n              self.modalTarget.append(newContainer);\n\n              if (typeof options.onComponentSnippetAdded === 'function') {\n                options.onComponentSnippetAdded.call(self, e, newComponent, selectedSnippet, contentArea);\n              }\n\n              if (typeof options.onContentChanged === 'function') {\n                options.onContentChanged.call(self, e, contentArea);\n              }\n\n              self.initContainer(contentArea, newContainer);\n            }\n\n            self.closeModal();\n          }); // Action click for snippet\n\n          modal.on('click', '.keditor-snippet', function (e) {\n            e.preventDefault();\n            var snippet = $(this);\n\n            if (!snippet.hasClass('selected')) {\n              snippet.parent().find('.selected').removeClass('selected');\n              snippet.addClass('selected');\n            }\n          });\n          var cssTransitionEnd = 'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend';\n          modal.on(cssTransitionEnd, function () {\n            if (!modal.hasClass('showed')) {\n              modal.css('display', 'none');\n              $(document.body).removeClass('opened-modal');\n            }\n          });\n          modal.appendTo(document.body);\n        } else {\n          error('\"snippetsUrl\" must be not null!');\n        }\n      }\n    }, {\n      key: \"renderSnippets\",\n      value: function renderSnippets(resp) {\n        flog('renderSnippets');\n        var self = this;\n        var options = self.options;\n        var snippetsContainerHtml = '';\n        var snippetsComponentHtml = '';\n        var snippetsContentHtml = '';\n        self.snippetsCategories = [];\n        self.snippetsContainerCategories = [];\n        self.snippetsComponentCategories = [];\n        $(resp).filter('div').each(function (i) {\n          var snippet = $(this);\n          var snippetId = self.generateId('snippet');\n          var content = snippet.html().trim();\n          var previewUrl = snippet.attr('data-preview');\n          var type = snippet.attr('data-type');\n          var title = snippet.attr('data-keditor-title');\n          var categories = snippet.attr('data-keditor-categories') || '';\n          var snippetHtml = \"\\n                    <section\\n                        class=\\\"keditor-ui keditor-snippet\\\"\\n                        data-snippet=\\\"#\".concat(snippetId, \"\\\"\\n                        data-type=\\\"\").concat(type, \"\\\"\\n                        title=\\\"\").concat(title, \"\\\"\\n                        data-keditor-categories=\\\"\").concat(categories, \"\\\"\\n                    >\\n                        <span><span style=\\\"background-image: url('\").concat(previewUrl, \"')\\\"></span></span>   \\n                    </section>\\n                \");\n          categories = categories.split(options.snippetsCategoriesSeparator);\n\n          if (type === 'container') {\n            snippetsContainerHtml += snippetHtml;\n            self.snippetsContainerCategories = self.snippetsContainerCategories.concat(categories);\n          } else if (type.indexOf('component') !== -1) {\n            snippetsComponentHtml += snippetHtml;\n            self.snippetsComponentCategories = self.snippetsComponentCategories.concat(categories);\n          }\n\n          var dataAttributes = self.getDataAttributes(snippet, ['data-preview', 'data-type', 'data-keditor-title', 'data-keditor-categories'], true);\n          snippetsContentHtml += \"<script id=\\\"\".concat(snippetId, \"\\\" type=\\\"text/html\\\" \").concat(dataAttributes.join(' '), \">\").concat(content, \"</script>\");\n        });\n        self.snippetsContainerCategories = self.beautifyCategories(self.snippetsContainerCategories);\n        self.snippetsComponentCategories = self.beautifyCategories(self.snippetsComponentCategories);\n        self.snippetsCategories = self.beautifyCategories([].concat(_toConsumableArray(self.snippetsContainerCategories), _toConsumableArray(self.snippetsComponentCategories)));\n\n        if (options.explicitSnippetEnabled) {\n          self.modal.find('.keditor-snippets-container').html(snippetsContainerHtml);\n          self.modal.find('.keditor-snippets-component').html(snippetsComponentHtml);\n        } else {\n          self.modal.find('.keditor-snippets').html(snippetsContainerHtml + snippetsComponentHtml);\n        }\n\n        self.modal.find('.keditor-modal-body').append(snippetsContentHtml);\n      }\n    }, {\n      key: \"initSnippetsFilter\",\n      value: function initSnippetsFilter(type) {\n        flog('initSnippetsFilter');\n        var self = this;\n        var options = self.options;\n        var modal = self.modal;\n        var categories;\n        var snippetsWrapperSelector;\n\n        switch (type) {\n          case SNIPPET_TYPE.ALL:\n            categories = self.snippetsCategories;\n            snippetsWrapperSelector = '.keditor-snippets-wrapper';\n            break;\n\n          case SNIPPET_TYPE.CONTAINER:\n            categories = self.snippetsContainerCategories;\n            snippetsWrapperSelector = '.keditor-snippets-wrapper-container';\n            break;\n\n          case SNIPPET_TYPE.COMPONENT:\n            categories = self.snippetsComponentCategories;\n            snippetsWrapperSelector = '.keditor-snippets-wrapper-component';\n            break;\n\n          default: // Do nothing\n\n        }\n\n        var categoriesOptions = '';\n        $.each(categories, function (i, category) {\n          categoriesOptions += \"<option value=\\\"\".concat(category, \"\\\">\").concat(category, \"</option>\");\n        });\n        var snippetsWrapper = modal.find(snippetsWrapperSelector);\n        var snippets = snippetsWrapper.find('.keditor-snippets').children('.keditor-snippet');\n        snippetsWrapper.prepend(\"\\n                <div class=\\\"keditor-ui keditor-snippets-filter-wrapper\\\">\\n                    <select class=\\\"keditor-ui keditor-snippets-filter\\\">\\n                        <option value=\\\"\\\" selected=\\\"selected\\\">All</option>\\n                        \".concat(categoriesOptions, \"\\n                    </select>\\n                    <input type=\\\"text\\\" class=\\\"keditor-ui keditor-snippets-search\\\" value=\\\"\\\" placeholder=\\\"Type to search...\\\" />\\n                </div>                \\n            \"));\n        snippets.each(function () {\n          var snippet = $(this);\n          var categories = snippet.attr('data-keditor-categories') || '';\n          var filterCategories = categories.toLowerCase();\n          categories = categories.split(options.snippetsCategoriesSeparator);\n          filterCategories = filterCategories.split(options.snippetsCategoriesSeparator);\n          snippet.data('categories', categories);\n          snippet.data('categoriesFilter', filterCategories);\n        });\n        var txtSearch = snippetsWrapper.find('.keditor-snippets-search');\n        var cbbFilter = snippetsWrapper.find('.keditor-snippets-filter');\n\n        var doFilter = function doFilter() {\n          var selectedCategory = (cbbFilter.val() || '').toLowerCase();\n          var searchText = (txtSearch.val() || '').toLowerCase();\n          snippets.filter('.selected').removeClass('selected');\n\n          if (selectedCategory || searchText) {\n            flog('Filtering snippets');\n            snippets.each(function () {\n              var snippet = $(this);\n              var dataCategories = snippet.data('categoriesFilter');\n              var dataCategoriesString = dataCategories.join(';');\n              var error = 0;\n\n              if (selectedCategory) {\n                if ($.inArray(selectedCategory, dataCategories) === -1) {\n                  error++;\n                }\n              }\n\n              if (searchText) {\n                var title = snippet.attr('title').toLowerCase();\n\n                if (title.indexOf(searchText) === -1 && dataCategoriesString.indexOf(searchText) === -1) {\n                  error++;\n                }\n              }\n\n              snippet[error === 0 ? 'removeClass' : 'addClass']('not-matched');\n            });\n          } else {\n            flog('Show all snippets');\n            snippets.removeClass('not-matched');\n          }\n        };\n\n        cbbFilter.on('change', function () {\n          doFilter();\n        });\n        var timer;\n        txtSearch.on('keydown', function () {\n          clearTimeout(timer);\n          timer = setTimeout(doFilter, 200);\n        });\n      }\n    }, {\n      key: \"openModal\",\n      value: function openModal(target, snippetType) {\n        flog('openModal', target, snippetType);\n        var self = this;\n        var modal = self.modal;\n        var options = self.options;\n        var modalTitle = '';\n\n        switch (snippetType) {\n          case SNIPPET_TYPE.CONTAINER:\n            modalTitle = 'Add container';\n            break;\n\n          case SNIPPET_TYPE.COMPONENT:\n            modalTitle = 'Add component';\n            break;\n\n          default: // Do nothing\n\n        }\n\n        if (options.explicitSnippetEnabled) {\n          modal.find('.keditor-snippets-wrapper').css('display', 'none');\n          modal.find(snippetType === SNIPPET_TYPE.COMPONENT ? '.keditor-snippets-wrapper-component' : '.keditor-snippets-wrapper-container').css('display', 'block');\n        } else {\n          modal.find('.keditor-snippets-wrapper').css('display', 'block').find('.keditor-snippet[data-type=container]').css('display', snippetType === SNIPPET_TYPE.COMPONENT ? 'none' : 'block');\n          modalTitle = 'Add content';\n        }\n\n        modal.find('.keditor-modal-title').html(modalTitle);\n        self.modalTarget = target;\n        self.modalSnippetType = snippetType;\n        modal.css('display', 'block');\n        $(document.body).addClass('opened-modal');\n        setTimeout(function () {\n          modal.addClass('showed');\n        }, 0);\n      }\n    }, {\n      key: \"closeModal\",\n      value: function closeModal() {\n        var self = this;\n        var modal = self.modal;\n        self.modalTarget = null;\n        self.modalAction = null;\n        modal.find('.keditor-modal-title').html('');\n        modal.find('.keditor-snippets-wrapper .selected').removeClass('selected');\n        modal.removeClass('showed');\n      } // Content areas\n      //---------------------------------\n\n    }, {\n      key: \"initContentAreas\",\n      value: function initContentAreas() {\n        flog('initContentAreas');\n        var self = this;\n        var contentAreasWrapper = self.contentAreasWrapper;\n        var options = self.options;\n        var contentAreas;\n\n        if (options.contentAreasSelector) {\n          contentAreas = contentAreasWrapper.find(options.contentAreasSelector);\n        }\n\n        if (!contentAreas || contentAreas.length === 0) {\n          flog('Do not find any content area. Creating default content area...');\n          var originalContent = contentAreasWrapper.html();\n          contentAreas = $('<div />').html(originalContent);\n          contentAreasWrapper.empty().append(contentAreas);\n        }\n\n        contentAreas.each(function () {\n          var contentArea = $(this);\n\n          if (!contentArea.attr('id')) {\n            contentArea.attr('id', self.generateId('content-area'));\n          }\n\n          self.initContentArea(contentArea);\n        });\n      }\n    }, {\n      key: \"initContentArea\",\n      value: function initContentArea(contentArea, dontInitToolbar) {\n        flog('initContentArea', contentArea);\n        var self = this;\n        var options = self.options;\n        contentArea.addClass('keditor-content-area');\n        var content = contentArea.html();\n        var contentAreaInner = $('<div class=\"keditor-content-area-inner\"></div>').html(content);\n        contentArea.html(contentAreaInner);\n\n        if (typeof options.onBeforeInitContentArea === 'function') {\n          options.onBeforeInitContentArea.call(self, contentArea);\n        }\n\n        if (!dontInitToolbar) {\n          var contentAreaToolbar = $(self.generateToolbar(TOOLBAR_TYPE.CONTENT_AREA));\n          contentArea.append(contentAreaToolbar);\n          contentAreaToolbar.children(options.explicitSnippetEnabled ? '.btn-add-container' : '.btn-add-content').on('click', function (e) {\n            e.preventDefault();\n            self.openModal(contentAreaInner, options.explicitSnippetEnabled ? SNIPPET_TYPE.CONTAINER : SNIPPET_TYPE.ALL);\n          });\n        }\n\n        flog('Initialize $.fn.sortable for content area');\n        contentAreaInner.sortable({\n          handle: '.keditor-toolbar-container:not(.keditor-toolbar-sub-container) .btn-container-reposition',\n          items: '> section',\n          helper: 'clone',\n          connectWith: '.keditor-content-area',\n          axis: 'y',\n          tolerance: 'pointer',\n          sort: function sort() {\n            $(this).removeClass('ui-state-default');\n          },\n          receive: function receive(event, ui) {\n            flog('On received snippet', event, ui);\n            var helper = ui.helper;\n            var item = ui.item;\n\n            if (helper) {\n              helper.remove();\n            }\n\n            self.closeSidebar();\n\n            if (typeof options.onContentChanged === 'function') {\n              options.onContentChanged.call(self, event, contentArea);\n            }\n\n            item.addClass('keditor-ui-dragging');\n          },\n          start: function start(e, ui) {\n            ui.item.addClass('keditor-ui-dragging');\n          },\n          stop: function stop(e, ui) {\n            if (ui.helper) {\n              ui.helper.remove();\n            }\n\n            ui.item.removeClass('keditor-ui-dragging');\n          }\n        });\n        flog('Initialize existing containers in content area');\n        contentAreaInner.children('section').each(function () {\n          self.convertToContainer(contentArea, $(this));\n        });\n\n        if (typeof options.onInitContentArea === 'function') {\n          var contentData = options.onInitContentArea.call(self, contentArea);\n\n          if (contentData && contentData.length > 0) {\n            $.each(contentData, function () {\n              self.convertToContainer(contentArea, $(this));\n            });\n          }\n        }\n      } // Containers\n      //---------------------------------\n\n    }, {\n      key: \"convertToContainer\",\n      value: function convertToContainer(contentArea, target) {\n        flog('convertToContainer', contentArea, target);\n        var self = this;\n        var container;\n\n        if (target.is('section')) {\n          target.addClass('keditor-ui keditor-container');\n          target.wrapInner('<section class=\"keditor-ui keditor-container-inner\"></section>');\n          container = target;\n        } else {\n          target.wrap('<section class=\"keditor-ui keditor-container\"><section class=\"keditor-ui keditor-container-inner\"></section></section>');\n          container = target.parent().parent();\n        }\n\n        self.initContainer(contentArea, container);\n      }\n    }, {\n      key: \"initContainer\",\n      value: function initContainer(contentArea, container) {\n        var self = this;\n        var options = self.options;\n        var isNested = options.nestedContainerEnabled && container.closest('[data-type=\"container-content\"]').length > 0;\n        flog(\"initContainer - isNested=\".concat(isNested), contentArea, container);\n\n        if (!container.hasClass('keditor-initialized-container') || !container.hasClass('keditor-initializing-container')) {\n          container.addClass('keditor-initializing-container');\n\n          if (typeof options.onBeforeInitContainer === 'function') {\n            options.onBeforeInitContainer.call(self, container, contentArea);\n          }\n\n          if (isNested) {\n            container.addClass('keditor-sub-container');\n          }\n\n          flog('Render KEditor toolbar for container', container);\n          container.append(self.generateToolbar(isNested ? TOOLBAR_TYPE.SUB_CONTAINER : TOOLBAR_TYPE.CONTAINER));\n          container.attr('id', self.generateId(isNested ? 'sub-container' : 'container'));\n          var containerContents = container.find('[data-type=\"container-content\"]');\n          flog(\"Initialize \".concat(containerContents.length, \" container content(s)\"));\n          containerContents.each(function () {\n            var containerContent = $(this);\n\n            if (options.nestedContainerEnabled && !isNested && containerContent.parents('[data-type=\"container-content\"]').length > 0) {\n              // Do nothing because it's container content of sub container\n              return;\n            }\n\n            self.initContainerContent(contentArea, container, containerContent, isNested);\n          });\n\n          if (typeof options.onInitContainer === 'function') {\n            options.onInitContainer.call(self, container, contentArea);\n          }\n\n          container.addClass('keditor-initialized-container');\n          container.removeClass('keditor-initializing-container');\n        } else {\n          if (container.hasClass('keditor-initialized-container')) {\n            flog('Container is already initialized!');\n          } else {\n            flog('Container is initializing...');\n          }\n        }\n      }\n    }, {\n      key: \"initContainerContent\",\n      value: function initContainerContent(contentArea, container, containerContent, isNested) {\n        flog(\"initContainerContent - isNested=\".concat(isNested), contentArea, container, containerContent);\n        var self = this;\n        var options = self.options;\n        containerContent.addClass('keditor-container-content');\n\n        if (isNested) {\n          containerContent.addClass('keditor-sub-container-content');\n        }\n\n        containerContent.attr('id', self.generateId('container-content'));\n        var containerContentInner = $('<div class=\"keditor-container-content-inner\"></div>');\n        containerContentInner.html(containerContent.html());\n        containerContent.html(containerContentInner);\n        flog('Initialize toolbar for container content');\n        var containerContentToolbar = $(self.generateToolbar(isNested ? TOOLBAR_TYPE.SUB_CONTAINER_CONTENT : TOOLBAR_TYPE.CONTAINER_CONTENT));\n        containerContentToolbar.appendTo(containerContent);\n\n        if (options.explicitSnippetEnabled) {\n          if (!isNested) {\n            if (options.explicitSnippetEnabled) {\n              containerContentToolbar.children('.btn-add-container').on('click', function (e) {\n                e.preventDefault();\n                self.openModal(containerContentInner, SNIPPET_TYPE.CONTAINER);\n              });\n            }\n          }\n\n          containerContentToolbar.children('.btn-add-component').on('click', function (e) {\n            e.preventDefault();\n            self.openModal(containerContentInner, SNIPPET_TYPE.COMPONENT);\n          });\n        } else {\n          containerContentToolbar.children('.btn-add-content').on('click', function (e) {\n            e.preventDefault();\n            self.openModal(containerContentInner, isNested ? SNIPPET_TYPE.COMPONENT : options.nestedContainerEnabled ? SNIPPET_TYPE.ALL : SNIPPET_TYPE.COMPONENT);\n          });\n        }\n\n        flog('Initialize $.fn.sortable for container content');\n        containerContentInner.sortable({\n          handle: '.btn-component-reposition, .btn-container-reposition',\n          helper: 'clone',\n          items: '> section',\n          connectWith: '.keditor-container-content-inner',\n          tolerance: 'pointer',\n          sort: function sort() {\n            $(this).removeClass('ui-state-default');\n          },\n          receive: function receive(event, ui) {\n            flog('On received snippet', event, ui);\n            var helper = ui.helper;\n            var item = ui.item;\n            var container;\n\n            if (helper) {\n              helper.remove();\n            }\n\n            container = item.closest('.keditor-container');\n\n            if (!container.hasClass('showed-keditor-toolbar')) {\n              $('.keditor-container.showed-keditor-toolbar').removeClass('showed-keditor-toolbar');\n              container.addClass('showed-keditor-toolbar');\n            }\n\n            if (typeof options.onContainerChanged === 'function') {\n              options.onContainerChanged.call(self, event, container, contentArea);\n            }\n\n            if (typeof options.onContentChanged === 'function') {\n              options.onContentChanged.call(self, event, contentArea);\n            }\n\n            item.removeClass('keditor-ui-dragging');\n          },\n          start: function start(e, ui) {\n            ui.item.addClass('keditor-ui-dragging');\n          },\n          stop: function stop(e, ui) {\n            if (ui.helper) {\n              ui.helper.remove();\n            }\n\n            ui.item.removeClass('keditor-ui-dragging');\n          }\n        });\n        flog('Initialize existing components inside container content');\n        containerContentInner.children().each(function () {\n          var child = $(this);\n\n          if (child.find('[data-type=\"container-content\"]').length > 0) {\n            self.convertToContainer(contentArea, child);\n          } else {\n            self.convertToComponent(contentArea, container, child, true);\n          }\n        });\n      } // Components\n      //---------------------------------\n\n    }, {\n      key: \"convertToComponent\",\n      value: function convertToComponent(contentArea, container, target, isExisting) {\n        flog('convertToComponent', contentArea, container, target, isExisting);\n\n        if (target.is('.keditor-container-content-toolbar')) {\n          return;\n        }\n\n        var self = this;\n        var isSection = target.is('section');\n        var component;\n\n        if (isSection) {\n          target.addClass('keditor-ui keditor-component');\n          target.wrapInner('<section class=\"keditor-ui keditor-component-content\"></section>');\n          component = target;\n        } else {\n          target.wrap('<section class=\"keditor-ui keditor-component\"><section class=\"keditor-ui keditor-component-content\"></section></section>');\n          component = target.parent().parent();\n        }\n\n        if (isExisting) {\n          component.addClass('existing-component');\n        }\n\n        self.initComponent(contentArea, container, component);\n      }\n    }, {\n      key: \"initComponent\",\n      value: function initComponent(contentArea, container, component) {\n        flog('initComponent', contentArea, container, component);\n        var self = this;\n        var options = self.options;\n        var body = self.body;\n\n        if (!component.hasClass('keditor-initialized-component') || !component.hasClass('keditor-initializing-component')) {\n          component.addClass('keditor-initializing-component');\n          component.attr('id', self.generateId('component'));\n\n          if (typeof options.onBeforeInitComponent === 'function') {\n            options.onBeforeInitComponent.call(self, component, contentArea);\n          }\n\n          var componentContent = component.children('.keditor-component-content');\n          componentContent.attr('id', self.generateId('component-content'));\n          var componentType = self.getComponentType(component);\n          flog(\"Component type: \".concat(componentType));\n          var componentData = KEditor.components[componentType];\n          flog('Render KEditor toolbar for component', component);\n          component.append(self.generateToolbar(TOOLBAR_TYPE.COMPONENT, componentData.settingEnabled));\n          component.find('[data-dynamic-href]').each(function () {\n            var dynamicElement = $(this);\n            self.initDynamicContent(dynamicElement);\n          });\n\n          if (typeof componentData.init === 'function') {\n            componentData.init.call(componentData, contentArea, container, component, self);\n          } else {\n            flog(\"\\\"init\\\" function of component type \\\"\".concat(componentType, \"\\\" does not exist\"));\n          }\n\n          if (typeof options.onInitComponent === 'function') {\n            options.onInitComponent.call(self, component, contentArea);\n          }\n\n          component.addClass('keditor-initialized-component');\n          component.removeClass('keditor-initializing-component');\n        } else {\n          if (component.hasClass('keditor-initialized-component')) {\n            flog('Component is already initialized!');\n          } else {\n            flog('Component is initializing...');\n          }\n        }\n      }\n    }, {\n      key: \"initDynamicContent\",\n      value: function initDynamicContent(dynamicElement) {\n        flog('initDynamicContent', dynamicElement);\n        var self = this;\n        var options = self.options;\n        var component = dynamicElement.closest('.keditor-component');\n        var contentArea = dynamicElement.closest('.keditor-content-area');\n        dynamicElement.attr('id', self.generateId('dynamic-element'));\n\n        if (typeof options.onBeforeDynamicContentLoad === 'function') {\n          options.onBeforeDynamicContentLoad.call(self, dynamicElement, component, contentArea);\n        }\n\n        var dynamicHref = dynamicElement.attr('data-dynamic-href');\n        var data = self.getDataAttributes(component, ['data-type', 'data-dynamic-href'], false);\n        data = $.param(data);\n        flog(\"Dynamic href: \".concat(dynamicHref, \", Data: \").concat(data));\n        return $.ajax({\n          url: dynamicHref,\n          data: data,\n          type: 'GET',\n          dataType: 'HTML',\n          success: function success(response, status, xhr) {\n            flog('Dynamic content is loaded', dynamicElement, response, status, xhr);\n            dynamicElement.html(response);\n\n            if (typeof options.onDynamicContentLoaded === 'function') {\n              options.onDynamicContentLoaded.call(self, dynamicElement, response, status, xhr, contentArea);\n            }\n          },\n          error: function error(response, status, xhr) {\n            flog('Error when loading dynamic content', dynamicElement, response, status, xhr);\n\n            if (typeof options.onDynamicContentError === 'function') {\n              options.onDynamicContentError.call(self, dynamicElement, response, status, xhr, contentArea);\n            }\n          }\n        });\n      }\n    }, {\n      key: \"deleteComponent\",\n      value: function deleteComponent(component) {\n        flog('deleteComponent', component);\n        var self = this;\n        var componentType = self.getComponentType(component);\n        var componentData = KEditor.components[componentType];\n\n        if (typeof componentData.destroy === 'function') {\n          componentData.destroy.call(componentData, component, self);\n        }\n\n        component.remove();\n      }\n    }, {\n      key: \"initIframeCover\",\n      value: function initIframeCover(iframe, wrapper) {\n        if (!wrapper) {\n          iframe.wrap('<div class=\"keditor-iframe-wrapper-fake\"></div>');\n          wrapper = iframe.parent();\n        }\n\n        wrapper.addClass('keditor-iframe-wrapper');\n        var cover = $('<div class=\"keditor-iframe-cover\"></div>');\n        wrapper.prepend(cover);\n        wrapper.on('mouseleave', function () {\n          wrapper.removeClass('hidden-cover');\n        });\n        cover.on('dblclick', function (e) {\n          e.preventDefault();\n          wrapper.addClass('hidden-cover');\n        });\n      } // Get content\n      //---------------------------------\n\n    }, {\n      key: \"getComponentContent\",\n      value: function getComponentContent(component) {\n        flog('getComponentContent');\n        var self = this;\n        var clonedComponent = component.clone();\n        var componentType = self.getComponentType(clonedComponent);\n        var componentData = KEditor.components[componentType];\n        var dataAttributes = self.getDataAttributes(clonedComponent, null, true);\n        var content; // Handle iframe-wrapper\n\n        var iframeWrapper = component.find('.keditor-iframe-wrapper');\n\n        if (iframeWrapper.length > 0) {\n          iframeWrapper.find('.keditor-iframe-cover').remove();\n          var iframe = iframeWrapper.children('iframe');\n\n          if (iframeWrapper.hasClass('keditor-iframe-wrapper-fake')) {\n            iframe.unwrap();\n          } else {\n            iframeWrapper.removeClass('keditor-iframe-wrapper');\n          }\n        }\n\n        if (typeof componentData.getContent === 'function') {\n          content = componentData.getContent.call(componentData, clonedComponent, self);\n        } else {\n          var componentContent = clonedComponent.children('.keditor-component-content');\n          content = componentContent.html();\n        }\n\n        clonedComponent.html(content).find('[data-dynamic-href]').each(function () {\n          $(this).html('');\n        });\n        return \"<section \".concat(dataAttributes.join(' '), \">\").concat(clonedComponent.html(), \"</section>\");\n      }\n    }, {\n      key: \"getContainerContent\",\n      value: function getContainerContent(container, isNested) {\n        flog(\"getContainerContent - isNested=\".concat(isNested), container);\n        var self = this;\n        var containerInner = container.children('.keditor-container-inner').clone();\n        containerInner.find('[data-type=container-content]').not(isNested ? '' : '.keditor-sub-container-content').each(function () {\n          var containerContent = $(this);\n          containerContent.removeClass('keditor-container-content keditor-sub-container-content ui-sortable').removeAttr('id');\n          var containerContentInner = containerContent.children();\n          var content = '';\n          containerContentInner.children().each(function () {\n            var child = $(this);\n\n            if (child.is('.keditor-component')) {\n              content += self.getComponentContent(child);\n            } else if (child.is('.keditor-sub-container')) {\n              content += self.getContainerContent(child, true);\n            }\n          });\n          containerContent.html(content);\n        });\n        return \"<section>\".concat(containerInner.html(), \"</section>\");\n      }\n    }, {\n      key: \"getContent\",\n      value: function getContent(inArray) {\n        var self = this;\n        var result = [];\n        self.contentAreasWrapper.find('.keditor-content-area-inner').each(function () {\n          var html = '';\n          $(this).children('.keditor-container').each(function () {\n            var container = $(this);\n            html += self.getContainerContent(container);\n          });\n          result.push(html);\n        });\n        return inArray ? result : result.join('\\n');\n      } // Set content\n      //---------------------------------\n\n    }, {\n      key: \"setContent\",\n      value: function setContent(content, contentArea) {\n        var self = this;\n        var contentAreasWrapper = self.contentAreasWrapper;\n\n        if (!contentArea) {\n          contentArea = contentAreasWrapper.children('.keditor-content-area');\n        } else {\n          if (!contentArea.jquery) {\n            contentArea = contentAreasWrapper.find(contentArea);\n          }\n        }\n\n        if (contentArea.length === 0) {\n          error('Content area does not exist!');\n        }\n\n        contentArea.html(content);\n        self.initContentArea(contentArea, true);\n      } // Destroy\n      //---------------------------------\n\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        var self = this;\n        var element = self.element;\n        var id = self.id;\n        var content = self.getContent(false);\n\n        if (self.options.iframeMode) {\n          self.iframeWrapper.remove();\n        } else {\n          self.contentAreasWrapper.remove();\n        }\n\n        if (element.is('textarea')) {\n          element.val(content);\n        } else {\n          element.html(content);\n        }\n\n        element.removeClass('keditor-hidden-element');\n        element.data('keditor', null);\n        delete KEditor.instances[id];\n      }\n    }]);\n\n    return KEditor;\n  }(); // KEditor plugins\n\n\n  $.fn.keditor = function (options) {\n    var element = $(this);\n    var instance = element.data('keditor');\n\n    if (typeof options === 'string') {\n      if (instance && instance[options] && typeof instance[options] === 'function') {\n        return instance[options].apply(instance, Array.prototype.slice.call(arguments, 1));\n      }\n    } else {\n      if (!instance) {\n        instance = new KEditor(element, options);\n        element.data('keditor', instance);\n      }\n\n      return instance;\n    }\n  };\n\n  $.fn.keditor.constructor = KEditor; // KEditor instances\n\n  KEditor.instances = {}; // Turn on/off debug mode\n\n  KEditor.debug = false; // Version of KEditor\n\n  KEditor.version = '@{version}'; // Component types\n\n  KEditor.components = {\n    blank: {\n      settingEnabled: false\n    }\n  }; // Export default configuration\n\n  KEditor.DEFAULTS = DEFAULTS; // Export log methods;\n\n  KEditor.log = flog;\n  KEditor.error = error; // Export KEditor\n\n  window.KEditor = $.keditor = KEditor;\n})(window, jQuery);"]}