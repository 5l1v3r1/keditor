{"version":3,"sources":["keditor-components-1.1.1.js"],"names":["$","KEditor","keditor","flog","log","components","error","options","toolbarGroups","name","groups","title","allowedContent","bodyId","templates_replaceContent","enterMode","forceEnterMode","format_tags","removePlugins","removeButtons","minimumChangeMilliseconds","init","contentArea","container","component","componentContent","children","prop","contentId","generateId","attr","on","e","onComponentChanged","call","onContainerChanged","onContentChanged","editor","ckeditor","this","onComponentReady","getContent","find","id","CKEDITOR","instances","getData","html","destroy","img","wrap","wrapper","parent","append","toolbar","photoEdit","fileInput","next","preventDefault","trigger","showSettingPanel","file","files","test","type","URL","createObjectURL","alert","remove","unwrap","settingEnabled","settingTitle","initSettingForm","form","self","inputAlign","panel","settingComponent","css","value","inputResponsive","checked","inputWidth","inputHeight","newWidth","newHeight","Math","round","ratio","width","height","val","showSettingForm","algin","hasClass","load","hideSettingForm","jQuery"],"mappings":"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","file":"keditor-components-1.1.1.min.js","sourcesContent":["(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    var error = KEditor.error;\r\n    var components = KEditor.components;\r\n\r\n    // Text component\r\n    // ---------------------------------------------------------------------\r\n    components['text'] = {\r\n        options: {\r\n            toolbarGroups: [\r\n                {name: 'document', groups: ['mode', 'document', 'doctools']},\r\n                {name: 'editing', groups: ['find', 'selection', 'spellchecker', 'editing']},\r\n                {name: 'forms', groups: ['forms']},\r\n                {name: 'basicstyles', groups: ['basicstyles', 'cleanup']},\r\n                {name: 'paragraph', groups: ['list', 'indent', 'blocks', 'align', 'bidi', 'paragraph']},\r\n                {name: 'links', groups: ['links']},\r\n                {name: 'insert', groups: ['insert']},\r\n                '/',\r\n                {name: 'clipboard', groups: ['clipboard', 'undo']},\r\n                {name: 'styles', groups: ['styles']},\r\n                {name: 'colors', groups: ['colors']},\r\n                {name: 'tools', groups: ['tools']},\r\n                {name: 'others', groups: ['others']},\r\n            ],\r\n            title: false,\r\n            allowedContent: true, // DISABLES Advanced Content Filter. This is so templates with classes: allowed through\r\n            bodyId: 'editor',\r\n            templates_replaceContent: false,\r\n            enterMode: 'P',\r\n            forceEnterMode: true,\r\n            format_tags: 'p;h1;h2;h3;h4;h5;h6',\r\n            removePlugins: 'table,magicline,tabletools',\r\n            removeButtons: 'Save,NewPage,Preview,Print,Templates,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Form,HiddenField,ImageButton,Button,Select,Textarea,TextField,Radio,Checkbox,Outdent,Indent,Blockquote,CreateDiv,Language,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,BGColor,Maximize,About,ShowBlocks,BidiLtr,BidiRtl,Flash,Image,Subscript,Superscript,Anchor',\r\n            minimumChangeMilliseconds: 100\r\n        },\r\n\r\n        init: function (contentArea, container, component, options) {\r\n            flog('init \"text\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.prop('contenteditable', true);\r\n\r\n            var contentId = KEditor.generateId('component-content');\r\n            flog('Id for component content is: ' + contentId);\r\n            componentContent.attr('id', contentId);\r\n\r\n            componentContent.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n\r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n\r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n\r\n            var editor = componentContent.ckeditor(this.options).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n\r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n\r\n        getContent: function (component, options) {\r\n            flog('getContent \"text\" component', component);\r\n\r\n            var componentContent = component.find('.keditor-component-content');\r\n            var id = componentContent.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                return editor.getData();\r\n            } else {\r\n                return componentContent.html();\r\n            }\r\n        },\r\n\r\n        destroy: function (component, options) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n\r\n    // Photo component\r\n    // ---------------------------------------------------------------------\r\n    components['photo'] = {\r\n        init: function (contentArea, container, component, options) {\r\n            flog('init \"photo\" component', component);\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var img = componentContent.find('img');\r\n            img.wrap('<div class=\"photo-wrapper\"></div>');\r\n\r\n            var wrapper = img.parent();\r\n            wrapper.append(\r\n                '<div class=\"photo-toolbar\">' +\r\n                '   <a href=\"#\" class=\"photo-edit\"><i class=\"fa fa-upload\"></i></a>' +\r\n                '   <input type=\"file\" style=\"display: none\" />' +\r\n                '</div>'\r\n            );\r\n\r\n            var toolbar = wrapper.find('.photo-toolbar');\r\n            var photoEdit = toolbar.find('.photo-edit');\r\n            var fileInput = photoEdit.next();\r\n            photoEdit.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                fileInput.trigger('click');\r\n                KEditor.showSettingPanel(component, options);\r\n            });\r\n\r\n            fileInput.on('change', function () {\r\n                var file = this.files[0];\r\n                if (/image/.test(file.type)) {\r\n                    img.attr('src', URL.createObjectURL(file));\r\n                } else {\r\n                    alert('Your selected file is not photo!');\r\n                }\r\n            });\r\n        },\r\n\r\n        getContent: function (component, options) {\r\n            flog('getContent \"photo\" component, component');\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.photo-toolbar').remove();\r\n            var img = componentContent.find('img');\r\n            img.unwrap();\r\n\r\n            return componentContent.html();\r\n        },\r\n\r\n        destroy: function (component, options) {\r\n            // Do nothing\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Add image',\r\n\r\n        initSettingForm: function (form, options) {\r\n            var self = this;\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-align\" class=\"col-sm-12\">Align</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select id=\"photo-align\" class=\"form-control\">' +\r\n                '               <option value=\"left\">Left</option>' +\r\n                '               <option value=\"center\">Center</option>' +\r\n                '               <option value=\"right\">Right</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-responsive\" class=\"col-sm-12\">Responsive</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"photo-responsive\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-width\" class=\"col-sm-12\">Width</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" id=\"photo-width\" class=\"form-control\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-height\" class=\"col-sm-12\">Height</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" id=\"photo-height\" class=\"form-control\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var inputAlign = form.find('#photo-align');\r\n            inputAlign.on('change', function () {\r\n                var panel = KEditor.settingComponent.find('.photo-panel');\r\n                panel.css('text-align', this.value);\r\n            });\r\n\r\n            var inputResponsive = form.find('#photo-responsive');\r\n            inputResponsive.on('click', function () {\r\n                KEditor.settingComponent.find('img')[this.checked ? 'addClass' : 'removeClass']('img-responsive');\r\n            });\r\n\r\n            var inputWidth = form.find('#photo-width');\r\n            var inputHeight = form.find('#photo-height');\r\n            inputWidth.on('change', function () {\r\n                var img = KEditor.settingComponent.find('img');\r\n                var newWidth = +this.value;\r\n                var newHeight = Math.round(newWidth / self.ratio);\r\n\r\n                if (newWidth <= 0) {\r\n                    newWidth = self.width;\r\n                    newHeight = self.height;\r\n                    this.value = newWidth;\r\n                }\r\n\r\n                img.css({\r\n                    'width': newWidth,\r\n                    'height': newHeight\r\n                });\r\n                inputHeight.val(newHeight);\r\n            });\r\n            inputHeight.on('change', function () {\r\n                var img = KEditor.settingComponent.find('img');\r\n                var newHeight = +this.value;\r\n                var newWidth = Math.round(newHeight * self.ratio);\r\n\r\n                if (newHeight <= 0) {\r\n                    newWidth = self.width;\r\n                    newHeight = self.height;\r\n                    this.value = newHeight;\r\n                }\r\n\r\n                img.css({\r\n                    'height': newHeight,\r\n                    'width': newWidth\r\n                });\r\n                inputWidth.val(newWidth);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, options) {\r\n            var self = this;\r\n            var inputAlign = form.find('#photo-align');\r\n            var inputResponsive = form.find('#photo-responsive');\r\n            var inputWidth = form.find('#photo-width');\r\n            var inputHeight = form.find('#photo-height');\r\n\r\n            var panel = component.find('.photo-panel');\r\n            var img = panel.find('img');\r\n\r\n            var algin = panel.css('text-align');\r\n            if (algin !== 'right' || algin !== 'center') {\r\n                algin = 'left';\r\n            }\r\n\r\n            inputAlign.val(algin);\r\n            inputResponsive.prop('checked', img.hasClass('img-responsive'));\r\n            inputWidth.val(img.width());\r\n            inputHeight.val(img.height());\r\n\r\n            $('<img />').attr('src', img.attr('src')).load(function() {\r\n                self.ratio = this.width / this.height;\r\n                self.width = this.width;\r\n                self.height = this.height;\r\n            });\r\n        },\r\n\r\n        hideSettingForm: function (form) {\r\n            // Do nothing\r\n        }\r\n    };\r\n\r\n})(jQuery);"],"sourceRoot":"/source/"}